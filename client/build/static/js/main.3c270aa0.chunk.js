(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{116:function(e,t,a){e.exports=a(304)},303:function(e,t,a){},304:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(25),c=a.n(r),s=a(6),o=a(5),i=a(8),u=a(7),m=a(9),d=a(11),p=a(31),h=a(55),E=a.n(h),f=a(13),b=a.n(f),g=function(e){e?b.a.defaults.headers.common.Authotization=e:delete b.a.defaults.headers.common.Authorization},v=function(e){return{type:"SET_CURRENT_USER",payload:e}},y=function(){return function(e){localStorage.removeItem("jwtToken"),g(!1),e(v({}))}},O=a(10),k=a(30),C=a(106),N=a(12),j=a(143),S={isAuthenticated:!1,user:{},loading:!1},w={},_={places:[],loading:!1},R={vehicles:[],loading:!1,balance:[],methods:[],checkin:{},clients:[],isCheckedIn:!1,consult:[],checkout:[],payment:[],notifiedUser:{}},T={charts_places:[],charts_checkin:[],loading:!1},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CHARTS_PLACES":return Object(N.a)({},e,{charts_places:t.payload});case"GET_CHECKIN_DASH":return Object(N.a)({},e,{charts_checkin:t.payload});default:return e}},U={isAuthenticated:!1,user:{},loading:!1,validUsers:[],updateUser:[],rental:[]},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_VALIDATE_USERS":return Object(N.a)({},e,{validUsers:t.payload});case"UPDATE_VALIDATE_USERS":return Object(N.a)({},e,{updateUser:t.payload});case"GET_RENTAL_DATA":return Object(N.a)({},e,{rental:t.payload});case"USER_LOADING":return Object(N.a)({},e,{loading:!0});default:return e}},I={users:{},validated:[]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFY_USER":return Object(N.a)({},e,{users:t.payload});case"GET_VALID_USERS":return Object(N.a)({},e,{validated:t.payload});default:return e}},L=Object(k.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(N.a)({},e,{isAuthenticated:!j(t.payload),user:t.payload});case"USER_LOADING":return Object(N.a)({},e,{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},places:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PLACES":return Object(N.a)({},e,{places:t.payload});case"PLACES_LOADING":return Object(N.a)({},e,{loading:!0});default:return e}},charts_places:x,charts_checkin:x,clients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_VEHICLES":return Object(N.a)({},e,{vehicles:t.payload});case"VEHICLES_LOADING":return Object(N.a)({},e,{loading:!0});case"GET_BALANCE":return Object(N.a)({},e,{balance:t.payload});case"GET_RENTAL_METHODS":return Object(N.a)({},e,{methods:t.payload});case"UPDATE_BALANCE":return Object(N.a)({},e,{balance:t.payload});case"POST_CHECKIN":return Object(N.a)({},e,{isCheckedIn:!0,checkin:t.payload});case"GET_CONSULT":return Object(N.a)({},e,{consult:t.payload});case"PUT_CHECKOUT":return Object(N.a)({},e,{checkout:t.payload});case"GET_USER_NOTIFIED":return Object(N.a)({},e,{notifiedUser:t.payload});case"PUT_PAYMENT":return Object(N.a)({},e,{payment:t.payload});default:return e}},validUsers:A,updateUser:A,rental:A,validated:D,users:D}),P=[C.a],M=Object(k.e)(L,{},Object(k.d)(k.a.apply(void 0,P),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),V=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"navbar-fixed"},l.a.createElement("nav",{className:"z-depth-0"},l.a.createElement("div",{className:"nav-wrapper white"},l.a.createElement(d.b,{to:"/",style:{fontFamily:"monospace"},className:"col s5 brand-logo center black-text"},l.a.createElement("i",{className:"material-icons"},"code"),"MOBILITY CITY"))))}}]),t}(n.Component),B=a(38),F=a(4),G=a.n(F),H=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).onChange=function(t){e.setState(Object(B.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={username:e.state.username,firstname:e.state.firstname,lastname:e.state.lastname,email:e.state.email,password:e.state.password};e.props.registerUser(a,e.props.history)},e.state={username:"",firstname:"",lastname:"",email:"",password:"",errors:{}},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/main")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s8 offset-s2"},l.a.createElement(d.b,{to:"/searchVehicles",className:"btn-flat waves-effect"},l.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),l.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},l.a.createElement("h4",null,l.a.createElement("b",null,"Register")," below"),l.a.createElement("p",{className:"grey-text text-darken-1"},"Already have an account? ",l.a.createElement(d.b,{to:"/login"},"Log in"))),l.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.username,error:e.username,id:"username",type:"text",className:G()("",{invalid:e.username})}),l.a.createElement("label",{htmlFor:"name"},"Username"),l.a.createElement("span",{className:"red-text"},e.name)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.firstname,error:e.firstname,id:"firstname",type:"text",className:G()("",{invalid:e.firstname})}),l.a.createElement("label",{htmlFor:"name"},"First Name"),l.a.createElement("span",{className:"red-text"},e.firstname)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.lastname,error:e.lastname,id:"lastname",type:"text",className:G()("",{invalid:e.lastname})}),l.a.createElement("label",{htmlFor:"name"},"Last name"),l.a.createElement("span",{className:"red-text"},e.lastname)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:G()("",{invalid:e.email})}),l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("span",{className:"red-text"},e.email)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:G()("",{invalid:e.password})}),l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("span",{className:"red-text"},e.password)),l.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},l.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Sign up"))))))}}]),t}(n.Component),Y=Object(O.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){b.a.post("".concat("http://138.68.47.243",":").concat("4001","/api/v1/register"),e).then((function(e){return t.push("/login")})).catch((function(e){return a({type:"GET_ERRORS",payload:e.response})}))}}})(Object(p.g)(H)),W=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).onChange=function(t){e.setState(Object(B.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){var a=(e.props.location.state||{from:{pathname:"/"}}).from;t.preventDefault();var n={username:e.state.username,password:e.state.password};e.props.loginUser(n),"client"===e.props.auth.user.role&&e.props.history.replace(a),"admin"==e.props.auth.user.role?e.props.history.push("/marParkings"):"employee"==e.props.auth.user.role&&e.props.history.push("/notifyUsers")},e.state={username:"",password:"",errors:{}},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/searchVehicles"),this.props.auth.isAuthenticated&&"employee"==this.props.auth.user.role&&this.props.history.push("/notifyUsers"),this.props.auth.isAuthenticated&&"admin"==this.props.auth.user.role&&this.props.history.push("/validateUsers")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/main"),e.auth.isAuthenticated&&"employee"==e.auth.user.role&&this.props.history.push("/notifyUsers"),e.auth.isAuthenticated&&"admin"==e.auth.user.role&&this.props.history.push("/validateUsers"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{style:{marginTop:"4rem"},className:"row"},l.a.createElement("div",{className:"col s8 offset-s2"},l.a.createElement(d.b,{to:"/searchVehicles",className:"btn-flat waves-effect"},l.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),l.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},l.a.createElement("h4",null,l.a.createElement("b",null,"Login")," below"),l.a.createElement("p",{className:"grey-text text-darken-1"},"Don't have an account? ",l.a.createElement(d.b,{to:"/register"},"Register"))),l.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.username,error:e.username,id:"username",type:"text",className:G()("",{invalid:e.username||e.usernamenotfound})}),l.a.createElement("label",{htmlFor:"email"},"Username"),l.a.createElement("span",{className:"red-text"},e.username,e.username)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:G()("",{invalid:e.password||e.passwordincorrect})}),l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("span",{className:"red-text"},e.password,e.passwordincorrect)),l.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},l.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Login"))))))}}]),t}(n.Component),z=Object(O.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:function(e){return function(t){b.a.post("".concat("http://138.68.47.243",":").concat("4001","/api/v1/login"),e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),g(a);var n=E()(a);t(v(n))})).catch((function(e){return t({type:"GET_ERRORS",payload:e})}))}}})(W),K=a(110),J=Object(O.b)((function(e){return{userRoles:e.auth.user.role,auth:e.auth}}))((function(e){var t=e.component,a=e.userRoles,n=void 0===a?[]:a,r=e.roles,c=void 0===r?[]:r,s=e.auth,o=Object(K.a)(e,["component","userRoles","roles","auth"]),i=c.some((function(e){return n.includes(e)}));return console.log("ROLES"+n),l.a.createElement(p.b,Object.assign({},o,{render:function(e){return!0===s.isAuthenticated&&i?l.a.createElement(t,e):l.a.createElement(p.a,{to:"/searchVehicles"})}}))})),q=a(108),X=a.n(q),Z=a(73),Q=a(315),$=Object(Q.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),ee=a(318),te=a(317),ae=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).onLogoutClick=function(e){e.preventDefault(),a.props.logoutUser()},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.auth.user;return l.a.createElement("div",null,this.props.auth.isAuthenticated?l.a.createElement("nav",{style:{fontFamily:"monospace"}},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("ul",{id:"nav-mobile",className:"center hide-on-med-and-down"},l.a.createElement("li",null,l.a.createElement(d.b,{to:"/validateUsers"},"Validate Users")),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/checkParkings"},"Check Parkings")),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/marParkings"},"Visualize Parkings")),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/charts"},"Dashboard")),l.a.createElement("li",null,l.a.createElement("button",{onClick:this.onLogoutClick},"Logout"))),l.a.createElement("ul",{className:"right"},l.a.createElement("li",null,l.a.createElement("span",{style:{display:"flex"}}," ",l.a.createElement("strong",null,"Hey there, ",e.username)))))):l.a.createElement("nav",{style:{fontFamily:"monospace"}},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("ul",{id:"nav-mobile",className:"center hide-on-med-and-down"},l.a.createElement("li",null,l.a.createElement(d.b,{to:"/login"},"Login")),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/register"},"Register"))))))}}]),t}(n.Component),ne=Object(O.b)((function(e){return{auth:e.auth}}),{logoutUser:y})(ae),le=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={barValues:"",barLabels:"",lineValues:"",lineLabels:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getOccupancy(),this.props.getCheckinDash();var t=new X.a("da84b590e82a4f23838b",{cluster:"eu",forceTLS:!0});t.subscribe("occupancy").bind("update-places",(function(t){e.setState({barValues:t.datapointsArray.data,barLabels:t.datapointsArray.labels})})),t.subscribe("checkinByDay").bind("update-rentals",(function(t){e.setState({lineValues:t.datapointsArray.data,lineLabels:t.datapointsArray.labels})}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:$.root},l.a.createElement(ne,null),l.a.createElement("br",null),l.a.createElement(te.a,{container:!0,spacing:3},l.a.createElement(te.a,{item:!0,xs:6},l.a.createElement(ee.a,{className:$.paper},l.a.createElement(Z.a,{data:""===this.state.barValues?{labels:this.props.charts_places.charts_places.labels,datasets:[{label:"% Occupancy tax",backgroundColor:"rgb(255, 0, 0)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:this.props.charts_places.charts_places.data}]}:{labels:this.state.barLabels,datasets:[{label:"% Occupancy tax",backgroundColor:"rgb(255, 0, 0)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:this.state.barValues}]},options:{title:{display:!0,text:"Places occupancy percentage (%)",fontSize:20},legend:{display:!0,position:"right"}}}))),l.a.createElement(te.a,{item:!0,xs:6},l.a.createElement(ee.a,{className:$.paper},l.a.createElement(Z.b,{data:""===this.state.lineValues?{labels:this.props.charts_checkin.charts_checkin.labels,datasets:[{label:"Number of checkins",backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:this.props.charts_checkin.charts_checkin.data}]}:{labels:this.state.lineLabels,datasets:[{label:"Number of checkins",backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:this.state.lineValues}]},options:{title:{display:!0,text:"Number of checkins by day",fontSize:20},legend:{display:!0,position:"right"}}}))))))}}]),t}(n.Component),re=Object(O.b)((function(e){return{auth:e.auth,charts_places:e.charts_places,charts_checkin:e.charts_checkin}}),{logoutUser:y,getOccupancy:function(){return function(e){return b.a.get("".concat("http://138.68.47.243",":").concat("4001","/api/v1/dashboard/places/occupancy_rate")).then((function(t){for(var a=[],n=[],l=0;l<t.data.length;l++){var r=t.data[l];a[l]=r.street,n[l]=r.occupancy}return e({type:"GET_CHARTS_PLACES",payload:{labels:a,data:n}})})).catch((function(t){return e({type:"GET_ERRORS",payload:t})}))}},getCheckinDash:function(){return function(e){return b.a.get("".concat("http://138.68.47.243",":").concat("4001","/api/v1/dashboard/rentals/date/count")).then((function(t){for(var a=[],n=[],l=0;l<t.data.length;l++){var r=t.data[l];a[l]=r._id.date,n[l]=r.count}return e({type:"GET_CHECKIN_DASH",payload:{labels:a,data:n}})})).catch((function(t){return e({type:"GET_ERRORS",payload:t})}))}}})(le),ce="".concat("http://138.68.47.243",":").concat("4001","/api/v1/place"),se=function(){return function(e){return b.a.get(ce).then((function(t){return e({type:"GET_PLACES",payload:t.data})})).catch((function(t){return e({type:"GET_ERRORS",payload:t})}))}},oe=a(20),ie=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.initialCenter,t=this.props.position,a=this.props.paths,n=this.props.style,r=this.props.center,c=this.props.google;return l.a.createElement(oe.Map,{google:c,zoom:18,initialCenter:e,style:n,center:r},l.a.createElement(oe.Marker,{onClick:this.onMarkerClick,name:"Current location",position:t}),l.a.createElement(oe.InfoWindow,{onClose:this.onInfoWindowClose},l.a.createElement("div",null,l.a.createElement("h1",null,"Test"))),l.a.createElement(oe.Polygon,{paths:a,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.35}))}}]),t}(n.Component),ue=Object(oe.GoogleApiWrapper)({apiKey:"AIzaSyAoJ4VmiODVuUDnOBuYq5ZGC3x7gHkVppg"})(ie);function me(){return l.a.createElement("div",null,l.a.createElement("nav",{style:{fontFamily:"monospace"}},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("a",{href:"#",className:"brand-logo right"},"MOBILITY CITY"),l.a.createElement("ul",{id:"nav-mobile",className:"center hide-on-med-and-down"},l.a.createElement("li",null,l.a.createElement(d.b,{to:"/login"},"Login")),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/register"},"Register"))))))}var de=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getPlaces()}},{key:"render",value:function(){var e=this.props.auth.user,t=this.props.places.places.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement("div",{className:"row center-align"},l.a.createElement("div",{className:"col"},l.a.createElement("p",null,l.a.createElement("b",null,"Capacity: "),l.a.createElement("span",null,e.capacity))),l.a.createElement("div",{className:"col"},l.a.createElement("p",null,l.a.createElement("b",null,"Quantity: "),l.a.createElement("span",null,e.quantity))),l.a.createElement("div",{className:"col"},l.a.createElement("p",null,l.a.createElement("b",null,"Postal Code: "),l.a.createElement("span",null,e.cp)))))}));return l.a.createElement("div",null,l.a.createElement(me,null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 center-align"},l.a.createElement("h4",null,l.a.createElement("b",null,"Hey there,")," ",0===Object.entries(e).length&&e.constructor===Object?"Guest":e.username,l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},l.a.createElement("span",{style:{fontFamily:"monospace"}},"MOBILITY CITY")," app \ud83d\udc4f"),l.a.createElement("b",null,"Check our places"),l.a.createElement("p",null,"Or Register here to have full access")),l.a.createElement("div",null,t),l.a.createElement(ue,{center:{lat:41.53113384600326,lng:-8.619018495082855},position:{lat:41.53113384600326,lng:-8.619018495082855},paths:[{lat:41.53113384600326,lng:-8.619018495082855},{lat:41.53113384600326,lng:-8.61851692199707},{lat:41.53129447698251,lng:-8.61851692199707},{lat:41.53129447698251,lng:-8.619018495082855},{lat:41.53113384600326,lng:-8.619018495082855}],style:{height:"400px",width:"100%"}}))))}}]),t}(n.Component),pe=(Object(O.b)((function(e){return{auth:e.auth,places:e.places}}),{logoutUser:y,getPlaces:se})(de),function(){return function(e){return b.a.get("".concat("http://138.68.47.243",":").concat("4001","/api/v1/vehicles")).then((function(t){return e({type:"GET_VEHICLES",payload:t.data})})).catch((function(t){return e({type:"GET_ERRORS",payload:t})}))}}),he=function(e,t,a,n,l){return function(r){return b.a.post("".concat("http://138.68.47.243",":").concat("4001","/api/v1/rental/checkin/user/").concat(e,"/vehicle/").concat(t,"/").concat(a,"/lat/").concat(n,"/lon/").concat(l)).then((function(e){return r({type:"POST_CHECKIN",payload:e.data})})).catch((function(e){return r({type:"POST_CHECKIN_ERROR",payload:e})}))}},Ee=a(3),fe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onLogoutClick=function(e){return e.preventDefault(),a.props.logoutUser(),l.a.createElement(p.a,{to:"/searchVehicles"})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.auth.user;return l.a.createElement("div",null,this.props.auth.isAuthenticated?l.a.createElement("nav",{style:{fontFamily:"monospace"}},l.a.createElement("div",{className:"nav-wrapper"}," ",l.a.createElement("ul",{id:"nav-mobile",className:"center hide-on-med-and-down"},l.a.createElement("li",null,l.a.createElement(d.b,{to:"/main"},"List of Vehicles")),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/searchVehicles"},"Search Vehicles")),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/balance"},"Balance")),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/checkin"},"Checkin")),l.a.createElement("li",null,l.a.createElement("button",{onClick:this.onLogoutClick},"Logout"))),l.a.createElement("ul",{className:"right"},l.a.createElement("li",null,l.a.createElement("span",{style:{display:"flex"}}," ",l.a.createElement("strong",null,"Hey there, ",e.username)))))):l.a.createElement("nav",{style:{fontFamily:"monospace"}},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("ul",{id:"nav-mobile",className:"center hide-on-med-and-down"},l.a.createElement("li",null,l.a.createElement(d.b,{to:"/login"},"Login")),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/register"},"Register"))))))}}]),t}(n.Component),be=Object(O.b)((function(e){return{auth:e.auth}}),{logoutUser:y})(fe),ge=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getVehicles()}},{key:"render",value:function(){var e=this.props.clients.vehicles;return l.a.createElement(l.a.Fragment,null,l.a.createElement(be,null),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"List of Vehicles")),l.a.createElement(Ee.Table,{centered:"true",responsible:"true"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{"data-field":"id"},"Code"),l.a.createElement("th",{"data-field":"name"},"Description"),l.a.createElement("th",{"data-field":"price"},"Available"))),e.map((function(e){return l.a.createElement("tbody",{key:e._id},l.a.createElement("tr",null,l.a.createElement("td",null,e.code),l.a.createElement("td",null,e.description),l.a.createElement("td",null,e.available?"Available":"Not Available")))}))))}}]),t}(n.Component),ve=Object(O.b)((function(e){return{auth:e.auth,vehicles:e.vehicles,clients:e.clients}}),{logoutUser:y,getVehicles:pe})(ge),ye=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).renderMarker=function(e){return l.a.createElement(oe.Marker,{key:e._id,position:e})},a.renderPolygon=function(e){return l.a.createElement(oe.Polygon,{paths:e,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.35})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.initialCenter,t=this.props.markerPositions,a=this.props.style,n=this.props.center,r=this.props.paths;return l.a.createElement(oe.Map,{google:this.props.google,zoom:18,initialCenter:e,style:a,center:n},t.map(this.renderMarker),l.a.createElement(oe.Polygon,{paths:r,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.35}))}}]),t}(n.Component),Oe=Object(oe.GoogleApiWrapper)({apiKey:"AIzaSyAoJ4VmiODVuUDnOBuYq5ZGC3x7gHkVppg"})(ye),ke=a(32),Ce=a.n(ke),Ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e,t,n){a.setState({address:e})},a.handleSelect=function(e){a.setState({address:e}),Object(ke.geocodeByAddress)(e).then((function(e){return Object(ke.getLatLng)(e[0])})).then((function(e){a.setState({lat:e.lat,lng:e.lng})})).catch((function(e){return e}))},a.getCoords=function(){var e=a.props.places.places.map((function(e){return{lat:e.center[0],lng:e.center[1]}}));return Object(N.a)({},e[0])},a.state={address:"",lat:"",lng:"",value:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getPlaces()}}]),Object(o.a)(t,[{key:"render",value:function(){var e=this.getCoords(),t=this.props.places.places.map((function(e){return{lat:e.center[0],lng:e.center[1]}})),a=this.props.places.places.map((function(e){return e.location.coordinates.map((function(e){return e.map((function(e){return{lat:e[0],lng:e[1]}}))}))}))[0],n=this.state.lat,r=this.state.lng,c={};return""!==this.state.lat&&""!==this.state.lng&&(c={lat:n,lng:r}),l.a.createElement("div",null,l.a.createElement(be,null),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Input the name of the street")),l.a.createElement("div",{className:"container valign-wrapper"},l.a.createElement("div",{className:"row center-align s12"},l.a.createElement("div",{className:"col"},l.a.createElement(Ce.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},(function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,r=e.loading;return l.a.createElement("div",null,l.a.createElement("input",t({placeholder:"Search Places ...",className:"location-search-input"})),l.a.createElement("div",{className:"autocomplete-dropdown-container"},r&&l.a.createElement("div",null,"Loading..."),a.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return l.a.createElement("div",n(e,{className:t,style:a}),l.a.createElement("span",null,e.description))}))))}))))),l.a.createElement(Oe,{initialCenter:e,paths:a,style:{height:"400px",width:"100%"},center:c,markerPositions:t}))}}]),t}(n.Component),je=Object(O.b)((function(e){return{auth:e.auth,places:e.places,clients:e.clients}}),{logoutUser:y,getPlaces:se})(Ne),Se=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getVehicles()}},{key:"render",value:function(){var e=this.props.auth.user;return l.a.createElement(l.a.Fragment,null,l.a.createElement(be,null),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("h4",null,"Your profile ",e.username),l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Edit your profile or charge your account!")),l.a.createElement("div",{className:"row center-align"},l.a.createElement("div",{className:"col s4"},l.a.createElement(Ee.TextInput,{label:"Firstname",placeholder:"First Name"})),l.a.createElement("div",{className:"col s4"},l.a.createElement(Ee.TextInput,{label:"Lastname",placeholder:"Last Name"})),l.a.createElement("div",{className:"col s4"},l.a.createElement(Ee.TextInput,{label:"Age",placeholder:"Age"}))),l.a.createElement("div",{className:"row center-align"},l.a.createElement("div",{className:"col s4"},l.a.createElement(Ee.TextInput,{label:"City",placeholder:"City"})),l.a.createElement("div",{className:"col s4"},l.a.createElement(Ee.TextInput,{label:"Street",placeholder:"Street"})),l.a.createElement("div",{className:"col s4"},l.a.createElement(Ee.TextInput,{label:"Contact",placeholder:"Contact"}))),l.a.createElement("div",{className:"row center-align"},l.a.createElement("div",{className:"col s4"},l.a.createElement(Ee.TextInput,{label:"School",placeholder:"School"})),l.a.createElement("div",{className:"col s4"},l.a.createElement(Ee.TextInput,{label:"Education",placeholder:"Education"})),l.a.createElement("div",{className:"col s4"},l.a.createElement(Ee.TextInput,{label:"About you",placeholder:"About you"}))),l.a.createElement("div",{className:"center-align"},l.a.createElement(Ee.Button,{node:"button",type:"submit",waves:"light"},"Submit",l.a.createElement(Ee.Icon,{right:!0},"send")),l.a.createElement(Ee.Button,{node:"button",type:"cancel",waves:"dark"},"Cancel",l.a.createElement(Ee.Icon,{right:!0},"cancel"))))}}]),t}(n.Component),we=(Object(O.b)((function(e){return{auth:e.auth,vehicles:e.vehicles}}),{logoutUser:y,getVehicles:pe})(Se),a(29)),_e=a.n(we),Re=(a(104),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getItems=function(){if(a.props.clients.balance.balance<5)return l.a.createElement("div",{className:"app-container"},l.a.createElement(_e.a,null),we.store.addNotification({title:"Balance!",message:"Your balance is getting to 0",type:"warning",insert:"top",container:"top-right",animationIn:["animated","flash"],animationOut:["animated","zoomOut"],dismiss:{duration:1e3,onScreen:!0}}))},a.onsave=function(){a.setState((function(e){return{disabled:!e.disabled}}))},a.onSubmit=function(e){e.preventDefault();var t={id:a.props.auth.user._id,balance:a.state.balance};a.props.updateBalance(t.id,t.balance),window.location.reload()},a.state={clicked:!1,balance:0,disabled:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getBalance(this.props.auth.user._id),this.timer=setInterval((function(){return e.getItems()}),5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=null}},{key:"onclick",value:function(e){this.setState((function(t){return{balance:"add"===e?t.balance+1:t.balance-1}}))}},{key:"render",value:function(){var e=this.props.auth.user,t=this.props.clients.balance;return l.a.createElement(l.a.Fragment,null,l.a.createElement(be,null),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("h4",null,"Hello ",e.username,"!"),l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Your Balance is ",t.balance,"\u20ac"),l.a.createElement("h5",{className:"className='flow-text grey-text text-darken-1'"},"Do you want to add more funds?"),l.a.createElement("div",{className:"center-align"},l.a.createElement(Ee.TextInput,{icon:"euro",label:"Insert budget",type:"number",className:"align-center",value:this.state.balance,disabled:!this.state.disabled,onClick:this.onsave})),l.a.createElement("div",{className:"row"},l.a.createElement(Ee.Button,{className:"red",floating:!0,icon:l.a.createElement(Ee.Icon,null,"add"),large:!0,node:"button",onClick:this.onclick.bind(this,"add"),disabled:!this.state.disabled}),l.a.createElement(Ee.Button,{className:"red",floating:!0,icon:l.a.createElement(Ee.Icon,null,"delete"),large:!0,node:"button",onClick:this.onclick.bind(this,"sub"),disabled:!this.state.disabled}),l.a.createElement(Ee.Button,{className:"red",floating:!0,icon:l.a.createElement(Ee.Icon,null,"save"),large:!0,onClick:this.onsave,node:"button"})),l.a.createElement("div",{className:"row"},l.a.createElement("div",null,l.a.createElement(Ee.Button,{node:"button",type:"submit",disabled:this.state.disabled,onClick:this.onSubmit},"Submit",l.a.createElement(Ee.Icon,{right:!0},"send")))),this.getItems()))}}]),t}(n.Component)),Te=Object(O.b)((function(e){return{auth:e.auth,vehicles:e.vehicles,balance:e.balance,clients:e.clients}}),{logoutUser:y,getVehicles:pe,getBalance:function(e){return function(t){return b.a.get("".concat("http://138.68.47.243",":").concat("4001","/api/v1/users/").concat(e,"/balance")).then((function(e){return t({type:"GET_BALANCE",payload:e.data})})).catch((function(e){return t({type:"BALANCE_ERROR",payload:e})}))}},updateBalance:function(e,t){return function(a){return b.a.put("".concat("http://138.68.47.243",":").concat("4001","/api/v1/users/").concat(e,"/balance/").concat(t)).then((function(e){return a({type:"UPDATE_BALANCE",payload:e})})).catch((function(e){return a({type:"BALANCE_ERROR",payload:e})}))}}})(Re),xe=a(26),Ue=a(74),Ae=a.n(Ue),Ie=(a(300),a(301),a(75)),De=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getNotification=function(){if(a.props.clients.notifiedUser.notified)return l.a.createElement("div",{className:"app-container"},l.a.createElement(_e.a,null),we.store.addNotification({title:"Wrong Parking!",message:"Your vehicle is in the wrong place",type:"warning",insert:"top",container:"top-right",animationIn:["animated","zoomIn"],animationOut:["animated","zoomOut"],dismiss:{duration:1e3,onScreen:!0}}))},a.onSubmit=function(e){e.preventDefault();var t={user:a.props.auth.user._id,id:a.state.vehicle.value,rentalMethod:a.state.rentalMethod.value,lat:JSON.stringify(a.state.lat),lon:JSON.stringify(a.state.lon)};a.props.postCheckIn(t.user,t.id,t.rentalMethod,t.lat,t.lon),a.setState((function(e){return{disabled:!e.disabled,checkin:!e.checkin}})),a.props.clients.isCheckIn=!a.props.clients.isCheckIn},a.onConsult=function(e){e.preventDefault(),a.props.getConsult(a.props.clients.checkin._id),setTimeout((function(){a.setState((function(e){return{canRender:!e.canRender}}))}),100)},a.state={vehicle:"",rentalMethod:"",lat:"",lon:"",disabled:!1,checkin:!1,price:"",previewCost:"",timeSpent:"",canRender:!1},a._onSelect=a._onSelect.bind(Object(xe.a)(a)),a._onMethodSelect=a._onMethodSelect.bind(Object(xe.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getVehicles(),this.props.getRentalMethods(),this.props.getNotifiedUser(this.props.auth.user._id),this.timer=setInterval((function(){return e.getNotification()}),2e3),navigator.geolocation.getCurrentPosition((function(t){e.setState({lat:t.coords.latitude,lon:t.coords.longitude})}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=null}}]),Object(o.a)(t,[{key:"_onSelect",value:function(e){this.setState({vehicle:e})}},{key:"_onMethodSelect",value:function(e){this.setState({rentalMethod:e})}},{key:"render",value:function(){var e=this.props.auth.user,t=this.props.clients.vehicles,a=this.props.clients.methods,n=t.filter((function(e){return!0===e.available})),r=this.state.vehicle,c=this.state.rentalMethod,s="string"===typeof this.state.vehicle?this.state.vehicle:this.state.vehicle.label,o="string"===typeof this.state.rentalMethod?this.state.rentalMethod:this.state.rentalMethod.label;return l.a.createElement(l.a.Fragment,null,l.a.createElement(be,null),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Hello ",e.username,"! Checkin with us now!"),l.a.createElement("div",{className:"row"},l.a.createElement("section",null,l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Pick your Vehicle"),l.a.createElement("div",{className:"col s6"},l.a.createElement(Ae.a,{options:n.map((function(e){return e._id})),onChange:this._onSelect,value:r,placeholder:"Select an option",disabled:this.state.disabled})),l.a.createElement("div",{className:"col s6 result"},"Your vehicle",l.a.createElement("strong",null," ",s," ")))),l.a.createElement("div",{className:"row"},l.a.createElement("section",null,l.a.createElement("h5",{className:"flow-text grey-text text-darken-1"},"Pick your rental method"),l.a.createElement("div",{className:"col s6"},l.a.createElement(Ae.a,{options:a,onChange:this._onMethodSelect,value:c,placeholder:"Select an option",disabled:this.state.disabled})),l.a.createElement("div",{className:"result col s6"},"Your Rental Method",l.a.createElement("strong",null," ",o," ")))),l.a.createElement("section",null,l.a.createElement("div",{className:"center-align"},l.a.createElement(Ee.Button,{node:"button",type:"submit",onClick:this.onSubmit,disabled:this.state.disabled},"Checkin",l.a.createElement(Ee.Icon,{right:!0},"send")),this.getNotification())),l.a.createElement("div",{className:"flow-text grey-text text-darken-2"},this.state.checkin?l.a.createElement("div",null,l.a.createElement(Ie.Snackbar,{message:"You are checked!",actionText:"x"}),l.a.createElement(Ee.Button,{node:"button",type:"submit",onClick:this.onConsult},"Check your time estimative!",l.a.createElement(Ee.Icon,{right:!0},"send")),this.state.canRender?l.a.createElement("section",null,l.a.createElement("div",null,l.a.createElement("span",null,"Base price is:"," ",l.a.createElement("strong",null,this.props.clients.consult.price))),l.a.createElement("div",null,l.a.createElement("span",null,"Your preview cost is:"," ",l.a.createElement("strong",null,this.props.clients.consult.previewCost))),l.a.createElement("div",null,l.a.createElement("span",null,"Time spend:"," ",l.a.createElement("strong",null,this.props.clients.consult.timeSpent))),l.a.createElement(d.c,{to:{pathname:"/checkout",state:Object(N.a)({},this.props.clients.consult)}},l.a.createElement(Ee.Button,{node:"button",type:"submit"},"Checkout",l.a.createElement(Ee.Icon,{right:!0},"send"))),this.props.clients.consult.paymentComplete?l.a.createElement(d.b,{to:"/checkout"},"Payment incomplete. Click here to redirect!"):""):""):l.a.createElement(Ie.Snackbar,{message:"You are not checked in!",actionText:"x"}))))}}]),t}(n.Component),Le=Object(O.b)((function(e){return{auth:e.auth,vehicles:e.vehicles,methods:e.methods,checkin:e.checkin,consult:e.consult,clients:e.clients,notifiedUser:e.notifiedUser}}),{logoutUser:y,getVehicles:pe,getRentalMethods:function(){return function(e){return b.a.get("".concat("http://138.68.47.243",":").concat("4001","/api/v1/rental/rentalMethods")).then((function(t){return e({type:"GET_RENTAL_METHODS",payload:t.data})})).catch((function(t){return e({type:"RENTAL_METHODS_ERROR",payload:t})}))}},postCheckIn:he,getConsult:function(e){return function(t){return b.a.get("".concat("http://138.68.47.243",":").concat("4001","/api/v1/rental/consult/").concat(e)).then((function(e){return t({type:"GET_CONSULT",payload:e.data})})).catch((function(e){return t({type:"CONSULT_ERROR",payload:e})}))}},getNotifiedUser:function(e){return function(t){return b.a.get("".concat("http://138.68.47.243",":").concat("4001","/api/v1/users/").concat(e)).then((function(e){return t({type:"GET_USER_NOTIFIED",payload:e.data})})).catch((function(e){return t({type:"CONSULT_ERROR",payload:e})}))}}})(De),Pe=a(319),Me=Object(Q.a)((function(e){return{root:{width:"100%",maxWidth:500}}})),Ve=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState({address:e})},a.handleSelect=function(e){a.setState({address:e}),Object(ke.geocodeByAddress)(e).then((function(e){return Object(ke.getLatLng)(e[0])})).then((function(e){a.setState({lat:e.lat,lng:e.lng,canRender:!0})})).catch((function(e){return console.error("Error",e)}))},a.checkoutNow=function(e){e.preventDefault();var t={id:a.props.clients.checkin._id,vehicle:a.props.clients.checkin.vehicle,lat:a.state.lat,lon:a.state.lng,address:a.state.address};a.props.updateCheckout(t.id,t.vehicle,t.lat,t.lon,t.address),setTimeout((function(){a.setState({checkout:a.props.clients.checkin.checkout,rentalMethod:a.props.clients.checkout.rentalMethod,previewCost:a.props.clients.checkout.previewCost,timeSpent:a.props.clients.checkout.timeSpent,hasDiscount:a.props.clients.checkout.hasDiscount})}),500)},a.updatePayment=function(e){e.preventDefault();var t={id:a.props.clients.checkout._id};a.props.updatePayment(t.id),setTimeout((function(){a.setState({finalCost:a.props.clients.payment.finalCost})}),1e3)},a.redirectNow=function(){return setInterval((function(){a.setState({count:a.state.count-1})}),2e3),l.a.createElement("div",null,l.a.createElement("div",null,"Refreshing in ",a.state.count),0!==a.state.count?"":l.a.createElement("div",null,l.a.createElement(p.a,{to:"/balance",state:!1===a.props.clients.isCheckIn})))},a.getCoords=function(){var e=a.props.places.places.map((function(e){return{lat:e.center[0],lng:e.center[1]}}));return Object(N.a)({},e[0])},a.state={address:"",lat:"",lng:"",value:"",canRender:!1,checkout:!1,hasPayment:!1,payment:"",finalCost:0,count:3,disabled:!1,rentalMethod:"",timeSpent:0,previewCost:0,hasDiscount:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.getCoords(),t={lat:this.state.lat,lng:this.state.lng},a=this.state.lat,n=this.state.lng,r={lat:41.53113384600326,lng:-8.619018495082855};return""!==this.state.lat&&""!==this.state.lng&&(r={lat:a,lng:n}),l.a.createElement("div",null,l.a.createElement(be,null),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("h3",{className:"flow-text grey-text text-darken-1"},"Checkout your location please!")),l.a.createElement("div",{className:"container valign-wrapper"},l.a.createElement("div",{className:"row center-align s12"},l.a.createElement("div",{className:"col"},l.a.createElement(Ce.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},(function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,r=e.loading;return l.a.createElement("div",null,l.a.createElement("input",t({placeholder:"Search Places ...",className:"location-search-input"})),l.a.createElement("div",{className:"autocomplete-dropdown-container"},r&&l.a.createElement("div",null,"Loading..."),a.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return l.a.createElement("div",n(e,{className:t,style:a}),l.a.createElement("span",null,e.description))}))))}))))),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(Ee.Button,{node:"button",type:"submit",onClick:this.checkoutNow,disabled:this.state.disabled},"Checkout",l.a.createElement(Ee.Icon,{right:!0},"send")),this.props.clients.checkout.checkout&&!this.props.clients.checkout.paymentComplete?l.a.createElement("div",null,l.a.createElement(Ee.Row,{key:0},l.a.createElement(Ee.Col,{m:12,s:12},l.a.createElement(Ee.Card,{actions:[l.a.createElement(Ee.Button,{node:"button",type:"submit",onClick:this.updatePayment,disabled:this.state.disabled},"Pay now!",l.a.createElement(Ee.Icon,{right:!0},"send"))],className:"blue-grey darken-1",closeicon:l.a.createElement(Ee.Icon,null,"close"),revealicon:l.a.createElement(Ee.Icon,null,"more_vert"),textClassName:"white-text",title:"Your payment data"},l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("label",null,"Payment Method: "),l.a.createElement("strong",null,l.a.createElement("span",null,this.state.rentalMethod))),l.a.createElement("p",null,l.a.createElement("label",null,"Preview Cost: "),l.a.createElement("strong",null,l.a.createElement("span",null,"".concat(this.state.previewCost,"\u20ac")))),l.a.createElement("p",null,l.a.createElement("label",null,"Time Spent: "),l.a.createElement("strong",null,l.a.createElement("span",null,this.state.timeSpent)))))))):l.a.createElement("div",null,"You still havent checked out!")),this.state.finalCost>0?l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(Pe.a,{className:Me.root,variant:"h6",gutterBottom:!0},this.state.hasDiscount?l.a.createElement("div",null,"Discount applied for valid Park."):l.a.createElement("div",null,"No discount"),l.a.createElement("div",null,"Payment of ".concat(this.state.finalCost,"\u20ac Successful!")),l.a.createElement("div",null,this.redirectNow()))):l.a.createElement(Pe.a,{className:Me.root,variant:"h6",gutterBottom:!0},l.a.createElement("div",{style:{textAlign:"center"}},"No payment has been made")),l.a.createElement("div",{className:"m12"},l.a.createElement(ue,{initialCenter:e,position:t,paths:[{lat:41.53113384600326,lng:-8.619018495082855},{lat:41.53113384600326,lng:-8.61851692199707},{lat:41.53129447698251,lng:-8.61851692199707},{lat:41.53129447698251,lng:-8.619018495082855},{lat:41.53113384600326,lng:-8.619018495082855}],style:{height:"400px",width:"100%"},center:r})))}}]),t}(n.Component),Be=Object(O.b)((function(e){return{auth:e.auth,places:e.places,checkin:e.checkin,checkout:e.checkout,payment:e.payment,clients:e.clients}}),{logoutUser:y,postCheckIn:he,updateCheckout:function(e,t,a,n,l){return function(r){return b.a.put("".concat("http://138.68.47.243",":").concat("4001","/api/v1/rental/checkout/").concat(e,"/vehicle/").concat(t,"/lat/").concat(a,"/lon/").concat(n,"/address/").concat(l)).then((function(e){return r({type:"PUT_CHECKOUT",payload:e.data})})).catch((function(e){return r({type:"CHECKOUT_ERROR",payload:e})}))}},updatePayment:function(e){return function(t){return b.a.put("".concat("http://138.68.47.243",":").concat("4001","/api/v1/rental/payment/").concat(e)).then((function(e){return t({type:"PUT_PAYMENT",payload:e.data})})).catch((function(e){return t({type:"PAYMENT_ERROR",payload:e})}))}}})(Ve),Fe=function(e,t){return function(a){return b.a.put("".concat("http://138.68.47.243",":").concat("4001","/api/v1/users/").concat(e,"/validation/").concat(t)).then((function(e){return a({type:"UPDATE_VALIDATE_USERS",payload:e})})).catch((function(e){return a({type:"UPDATE_ERROS",payload:e})}))}},Ge=function(){return function(e){return b.a.get("".concat("http://138.68.47.243",":").concat("4001","/api/v1/rental/check")).then((function(t){return e({type:"GET_RENTAL_DATA",payload:t.data})})).catch((function(t){return e({type:"UPDATE_ERROS",payload:t})}))}},He=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).updateUser=function(e){e.preventDefault();var t={id:a.state.item,userId:a.props.auth.user._id};a.props.updateUsers(t.id,t.userId),window.location.reload()},a.state={user:"",item:"",checkedItems:new Map},a.handleChange=a.handleChange.bind(Object(xe.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getValidUsers()}}]),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=e.target.id,a=e.target.checked;this.setState((function(e){return{checkedItems:e.checkedItems.set(t,a),item:t}}))}},{key:"render",value:function(){var e=this,t=this.props.validUsers.validUsers;return l.a.createElement("div",null,l.a.createElement(ne,null),l.a.createElement(Ee.Table,{centered:"true",responsible:"true"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{"data-field":"role"},"Role"),l.a.createElement("th",{"data-field":"user"},"User"),l.a.createElement("th",{"data-field":"email"},"email"),l.a.createElement("th",{"data-field":"valid"},"Validate"))),t.length>0?t.map((function(t){return l.a.createElement("tbody",{key:t._id},l.a.createElement("tr",null,l.a.createElement("td",null,t.role),l.a.createElement("td",null,t.username),l.a.createElement("td",null,t.email),l.a.createElement("td",null,l.a.createElement(Ee.Checkbox,{style:{margin:"1em"},id:t._id,label:"",value:"Red",onChange:e.handleChange,checked:e.state.checkedItems.get(t._id)}),l.a.createElement(Ee.Button,{node:"a",small:!0,style:{marginRight:"5px",marginBottom:"1.6em"},onClick:e.updateUser},"Validate"))))})):l.a.createElement("div",{style:{textAlign:"left"}},l.a.createElement(Pe.a,{className:Me.root,variant:"h6",gutterBottom:!0},"No users to validate!"))))}}]),t}(n.Component),Ye=Object(O.b)((function(e){return{auth:e.auth,places:e.places,clients:e.clients,validUsers:e.validUsers,updateUser:e.updateUser}}),{logoutUser:y,getValidUsers:function(){return function(e){return b.a.get("".concat("http://138.68.47.243",":").concat("4001","/api/v1/users/admin/waitvalidation")).then((function(t){return e({type:"GET_VALIDATE_USERS",payload:t.data})})).catch((function(t){return e({type:"GET_ERRORS",payload:t})}))}},updateUsers:Fe})(He,Fe),We=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getRentalData()}},{key:"render",value:function(){var e=this.props.rental.rental;return l.a.createElement("div",null,l.a.createElement(ne,null),l.a.createElement(Ee.Table,{centered:"true",responsible:"true"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{"data-field":"username"},"Username"),l.a.createElement("th",{"data-field":"fullname"},"Fullname"),l.a.createElement("th",{"data-field":"email"},"Email"),l.a.createElement("th",{"data-field":"rental"},"Rental Method"),l.a.createElement("th",{"data-field":"Address"},"Address"),l.a.createElement("th",{"data-field":"timespend"},"Time Spent"),l.a.createElement("th",{"data-field":"cost"},"Cost"))),e.map((function(e){return l.a.createElement("tbody",{key:e._id},l.a.createElement("tr",null,l.a.createElement("td",null,e.username),l.a.createElement("td",null,"".concat(e.firstname," ").concat(e.lastname)),l.a.createElement("td",null,e.email),l.a.createElement("td",null,e.rentalMethod),l.a.createElement("td",null,e.address),l.a.createElement("td",null,e.timeSpent),l.a.createElement("td",null,void 0===e.finalCost?"-":"".concat(e.finalCost,"\u20ac"))))}))))}}]),t}(n.Component),ze=Object(O.b)((function(e){return{auth:e.auth,places:e.places,rental:e.rental}}),{logoutUser:y,getRentalData:Ge})(We),Ke=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getCoords=function(){var e=a.props.places.places.map((function(e){return{lat:e.center[0],lng:e.center[1]}}));return Object(N.a)({},e[0])},a.state={lat:0,lng:0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getRentalData(),this.props.getPlaces()}},{key:"render",value:function(){var e=this.props.rental.rental,t=this.getCoords(),a=e.map((function(e){return{lat:e.end.geometry.coordinates[0],lng:e.end.geometry.coordinates[1]}}));return l.a.createElement("div",null,l.a.createElement(ne,null),l.a.createElement(ee.a,{className:$.paper},l.a.createElement(Oe,{markerPositions:a,initialCenter:t,style:{height:"400px",width:"100%"}})))}}]),t}(n.Component),Je=Object(O.b)((function(e){return{auth:e.auth,places:e.places,rental:e.rental}}),{logoutUser:y,getRentalData:Ge,getPlaces:se})(Ke),qe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onLogoutClick=function(e){return e.preventDefault(),a.props.logoutUser(),l.a.createElement(p.a,{to:"/searchVehicles",state:!1===a.props.auth.isAuthenticated})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.auth.user;return l.a.createElement("div",null,this.props.auth.isAuthenticated?l.a.createElement("nav",{style:{fontFamily:"monospace"}},l.a.createElement("div",{className:"nav-wrapper"}," ",l.a.createElement("ul",{id:"nav-mobile",className:"center hide-on-med-and-down"},l.a.createElement("li",null,l.a.createElement(d.b,{to:"/notifyUsers"},"Notify Users")),l.a.createElement("li",null,l.a.createElement("button",{onClick:this.onLogoutClick},"Logout"))),l.a.createElement("ul",{className:"right"},l.a.createElement("li",null,l.a.createElement("span",{style:{display:"flex"}}," ",l.a.createElement("strong",null,"Hey there, ",e.username)))))):l.a.createElement("nav",{style:{fontFamily:"monospace"}},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("ul",{id:"nav-mobile",className:"center hide-on-med-and-down"},l.a.createElement("li",null,l.a.createElement(d.b,{to:"/login"},"Login")),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/register"},"Register"))))))}}]),t}(n.Component),Xe=Object(O.b)((function(e){return{auth:e.auth}}),{logoutUser:y})(qe),Ze=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).updateUser=function(e){e.preventDefault();var t=a.state.item;a.props.updateNotifications(t),window.location.reload()},a.state={user:"",item:"",checkedItems:new Map},a.handleChange=a.handleChange.bind(Object(xe.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.validUsers()}}]),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=e.target.id,a=e.target.checked;this.setState((function(e){return{checkedItems:e.checkedItems.set(t,a),item:t}}))}},{key:"render",value:function(){var e=this,t=this.props.validated.validated;return l.a.createElement("div",null,l.a.createElement(Xe,null),l.a.createElement(Ee.Table,{centered:"true",responsible:"true"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{"data-field":"role"},"Role"),l.a.createElement("th",{"data-field":"user"},"User"),l.a.createElement("th",{"data-field":"email"},"email"),l.a.createElement("th",{"data-field":"email"},"Parking"),l.a.createElement("th",{"data-field":"valid"},"Notified"))),t.map((function(t){return l.a.createElement("tbody",{key:t._id},l.a.createElement("tr",null,l.a.createElement("td",null,t.role),l.a.createElement("td",null,t.username),l.a.createElement("td",null,t.email),l.a.createElement("td",null,t.validParking?"Valid Parking":"Invalid Parking"),l.a.createElement("td",null,t.notified?"User Notified":l.a.createElement("div",null,l.a.createElement(Ee.Checkbox,{style:{margin:"1em"},id:t._id,label:"",value:"Red",checked:e.state.checkedItems.get(t._id),onChange:e.handleChange}),l.a.createElement(Ee.Button,{node:"a",small:!0,style:{marginRight:"5px",marginBottom:"1.6em"},onClick:e.updateUser},"Notify")))))}))))}}]),t}(n.Component),Qe={routes:[{component:re,url:"/charts",roles:["admin"]},{component:Je,url:"/marParkings",roles:["admin"]},{component:ze,url:"/checkParkings",roles:["admin"]},{component:Ye,url:"/validateusers",roles:["admin"]},{component:Object(O.b)((function(e){return{auth:e.auth,updateUser:e.updateUser,validated:e.validated,users:e.users}}),{logoutUser:y,validUsers:function(){return function(e){return b.a.get("".concat("http://138.68.47.243",":").concat("4001","/api/v1/users/func/validUsers")).then((function(t){return e({type:"GET_VALID_USERS",payload:t.data})})).catch((function(t){return e({type:"UPDATE_ERROS",payload:t})}))}},updateNotifications:function(e){return function(t){return b.a.put("".concat("http://138.68.47.243",":").concat("4001","/api/v1/notify/").concat(e)).then((function(e){return t({type:"NOTIFY_USER",payload:e})})).catch((function(e){return t({type:"UPDATE_ERROS",payload:e})}))}}})(Ze),url:"/notifyUsers",roles:["employee"]},{component:ve,url:"/main",roles:["client"]},{component:Te,url:"/balance",roles:[]},{component:Le,url:"/checkin",roles:[]},{component:Be,url:"/checkout",roles:[]},{component:z,url:"/login",roles:[]},{component:je,url:"/searchVehicles",roles:[]},{component:je,url:"/",roles:[]},{component:Y,url:"/register",roles:[]}]};if(localStorage.jwtToken){var $e=localStorage.jwtToken;g($e);var et=E()($e);M.dispatch(v(et));var tt=Date.now()/1e3;et.exp<tt&&(M.dispatch(y()),window.location.href="./searchVehicles")}var at=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement(O.a,{store:M},l.a.createElement(d.a,null,l.a.createElement("div",{className:"App"},console.log(Qe),l.a.createElement(V,null),l.a.createElement(p.d,null,Qe.routes.map((function(e){var t=e.component,a=e.roles,n=e.url;return a.length?l.a.createElement(J,{exact:!0,path:n,component:t,roles:a}):l.a.createElement(p.b,{exact:!0,path:n,component:t})}))))))}}]),t}(n.Component);a(302),a(303);c.a.render(l.a.createElement(at,null),document.querySelector("#root"))}},[[116,1,2]]]);
//# sourceMappingURL=main.3c270aa0.chunk.js.map