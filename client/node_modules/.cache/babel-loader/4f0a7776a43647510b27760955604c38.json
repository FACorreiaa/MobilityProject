{"ast":null,"code":"import _classCallCheck from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{connect}from'react-redux';import{logoutUser}from'../../actions/authActions';import{getOccupancy,getCheckinDash}from'../../actions/dashActions';import Pusher from'pusher-js';import{Bar,Line}from'react-chartjs-2';import{classes}from'../Contants/constants/graph';import Paper from'@material-ui/core/Paper';import Grid from'@material-ui/core/Grid';import Navbar from'../Admin/NavBar';//Pusher.logToConsole = true;\nvar occupancyChannel;var checkinChannel;var Charts=/*#__PURE__*/function(_Component){_inherits(Charts,_Component);function Charts(props){var _this;_classCallCheck(this,Charts);_this=_possibleConstructorReturn(this,_getPrototypeOf(Charts).call(this,props));_this.state={barValues:'',barLabels:'',lineValues:'',lineLabels:''};return _this;}_createClass(Charts,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.props.getOccupancy();this.props.getCheckinDash();var pusher=new Pusher('da84b590e82a4f23838b',{cluster:'eu',forceTLS:true});occupancyChannel=pusher.subscribe('occupancy');occupancyChannel.bind('update-places',function(res){_this2.setState({barValues:res.datapointsArray.data,barLabels:res.datapointsArray.labels});});checkinChannel=pusher.subscribe('checkinByDay');checkinChannel.bind('update-rentals',function(res){_this2.setState({lineValues:res.datapointsArray.data,lineLabels:res.datapointsArray.labels});});}},{key:\"render\",value:function render(){return React.createElement(React.Fragment,null,React.createElement(\"div\",{className:classes.root},React.createElement(Navbar,null),React.createElement(\"br\",null),React.createElement(Grid,{container:true,spacing:3},React.createElement(Grid,{item:true,xs:6},React.createElement(Paper,{className:classes.paper},React.createElement(Bar,{data:this.state.barValues===''?{labels:this.props.charts_places.charts_places.labels,datasets:[{label:'% Occupancy tax',backgroundColor:'rgb(255, 0, 0)',borderColor:'rgba(0,0,0,1)',borderWidth:2,data:this.props.charts_places.charts_places.data}]}:{labels:this.state.barLabels,datasets:[{label:'% Occupancy tax',backgroundColor:'rgb(255, 0, 0)',borderColor:'rgba(0,0,0,1)',borderWidth:2,data:this.state.barValues}]},options:{title:{display:true,text:'Places occupancy percentage (%)',fontSize:20},legend:{display:true,position:'right'}}}))),React.createElement(Grid,{item:true,xs:6},React.createElement(Paper,{className:classes.paper},React.createElement(Line,{data:this.state.lineValues===''?{labels:this.props.charts_checkin.charts_checkin.labels,datasets:[{label:'Number of checkins',backgroundColor:'rgba(75,192,192,1)',borderColor:'rgba(0,0,0,1)',borderWidth:2,data:this.props.charts_checkin.charts_checkin.data}]}:{labels:this.state.lineLabels,datasets:[{label:'Number of checkins',backgroundColor:'rgba(75,192,192,1)',borderColor:'rgba(0,0,0,1)',borderWidth:2,data:this.state.lineValues}]},options:{title:{display:true,text:'Number of checkins by day',fontSize:20},legend:{display:true,position:'right'}}}))))));}}]);return Charts;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth,charts_places:state.charts_places,charts_checkin:state.charts_checkin};};//connect to redux\nexport default connect(mapStateToProps,{logoutUser:logoutUser,getOccupancy:getOccupancy,getCheckinDash:getCheckinDash})(Charts);","map":{"version":3,"sources":["/home/fernando/Documentos/MobilityProject/client/src/components/Dashboard/Charts.js"],"names":["React","Component","connect","logoutUser","getOccupancy","getCheckinDash","Pusher","Bar","Line","classes","Paper","Grid","Navbar","occupancyChannel","checkinChannel","Charts","props","state","barValues","barLabels","lineValues","lineLabels","pusher","cluster","forceTLS","subscribe","bind","res","setState","datapointsArray","data","labels","root","paper","charts_places","datasets","label","backgroundColor","borderColor","borderWidth","title","display","text","fontSize","legend","position","charts_checkin","mapStateToProps","auth"],"mappings":"i1BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,UAAT,KAA2B,2BAA3B,CACA,OAASC,YAAT,CAAuBC,cAAvB,KAA6C,2BAA7C,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,OAASC,GAAT,CAAcC,IAAd,KAA0B,iBAA1B,CACA,OAASC,OAAT,KAAwB,6BAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CACA;AAEA,GAAIC,CAAAA,gBAAJ,CACA,GAAIC,CAAAA,cAAJ,C,GAEMC,CAAAA,M,gEACJ,gBAAYC,KAAZ,CAAmB,wCACjB,wEAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACXC,SAAS,CAAE,EADA,CAEXC,SAAS,CAAE,EAFA,CAGXC,UAAU,CAAE,EAHD,CAIXC,UAAU,CAAE,EAJD,CAAb,CAFiB,aAQlB,C,gFAEmB,iBAClB,KAAKL,KAAL,CAAWZ,YAAX,GACA,KAAKY,KAAL,CAAWX,cAAX,GAEA,GAAIiB,CAAAA,MAAM,CAAG,GAAIhB,CAAAA,MAAJ,CAAW,sBAAX,CAAmC,CAC9CiB,OAAO,CAAE,IADqC,CAE9CC,QAAQ,CAAE,IAFoC,CAAnC,CAAb,CAIAX,gBAAgB,CAAGS,MAAM,CAACG,SAAP,CAAiB,WAAjB,CAAnB,CACAZ,gBAAgB,CAACa,IAAjB,CAAsB,eAAtB,CAAuC,SAAAC,GAAG,CAAI,CAC5C,MAAI,CAACC,QAAL,CAAc,CACZV,SAAS,CAAES,GAAG,CAACE,eAAJ,CAAoBC,IADnB,CAEZX,SAAS,CAAEQ,GAAG,CAACE,eAAJ,CAAoBE,MAFnB,CAAd,EAID,CALD,EAOAjB,cAAc,CAAGQ,MAAM,CAACG,SAAP,CAAiB,cAAjB,CAAjB,CACAX,cAAc,CAACY,IAAf,CAAoB,gBAApB,CAAsC,SAAAC,GAAG,CAAI,CAC3C,MAAI,CAACC,QAAL,CAAc,CACZR,UAAU,CAAEO,GAAG,CAACE,eAAJ,CAAoBC,IADpB,CAEZT,UAAU,CAAEM,GAAG,CAACE,eAAJ,CAAoBE,MAFpB,CAAd,EAID,CALD,EAMD,C,uCAEQ,CACP,MACE,yCACE,2BAAK,SAAS,CAAEtB,OAAO,CAACuB,IAAxB,EACE,oBAAC,MAAD,MADF,CAEE,8BAFF,CAGE,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,EACE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,EACE,oBAAC,KAAD,EAAO,SAAS,CAAEvB,OAAO,CAACwB,KAA1B,EACE,oBAAC,GAAD,EACE,IAAI,CACF,KAAKhB,KAAL,CAAWC,SAAX,GAAyB,EAAzB,CACI,CACEa,MAAM,CAAE,KAAKf,KAAL,CAAWkB,aAAX,CAAyBA,aAAzB,CAAuCH,MADjD,CAEEI,QAAQ,CAAE,CACR,CACEC,KAAK,CAAE,iBADT,CAEEC,eAAe,CAAE,gBAFnB,CAGEC,WAAW,CAAE,eAHf,CAIEC,WAAW,CAAE,CAJf,CAKET,IAAI,CAAE,KAAKd,KAAL,CAAWkB,aAAX,CAAyBA,aAAzB,CAAuCJ,IAL/C,CADQ,CAFZ,CADJ,CAaI,CACEC,MAAM,CAAE,KAAKd,KAAL,CAAWE,SADrB,CAEEgB,QAAQ,CAAE,CACR,CACEC,KAAK,CAAE,iBADT,CAEEC,eAAe,CAAE,gBAFnB,CAGEC,WAAW,CAAE,eAHf,CAIEC,WAAW,CAAE,CAJf,CAKET,IAAI,CAAE,KAAKb,KAAL,CAAWC,SALnB,CADQ,CAFZ,CAfR,CA4BE,OAAO,CAAE,CACPsB,KAAK,CAAE,CACLC,OAAO,CAAE,IADJ,CAELC,IAAI,CAAE,iCAFD,CAGLC,QAAQ,CAAE,EAHL,CADA,CAMPC,MAAM,CAAE,CACNH,OAAO,CAAE,IADH,CAENI,QAAQ,CAAE,OAFJ,CAND,CA5BX,EADF,CADF,CADF,CA6CE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,EACE,oBAAC,KAAD,EAAO,SAAS,CAAEpC,OAAO,CAACwB,KAA1B,EACE,oBAAC,IAAD,EACE,IAAI,CACF,KAAKhB,KAAL,CAAWG,UAAX,GAA0B,EAA1B,CACI,CACEW,MAAM,CAAE,KAAKf,KAAL,CAAW8B,cAAX,CAA0BA,cAA1B,CACLf,MAFL,CAGEI,QAAQ,CAAE,CACR,CACEC,KAAK,CAAE,oBADT,CAEEC,eAAe,CAAE,oBAFnB,CAGEC,WAAW,CAAE,eAHf,CAIEC,WAAW,CAAE,CAJf,CAKET,IAAI,CAAE,KAAKd,KAAL,CAAW8B,cAAX,CAA0BA,cAA1B,CACHhB,IANL,CADQ,CAHZ,CADJ,CAeI,CACEC,MAAM,CAAE,KAAKd,KAAL,CAAWI,UADrB,CAEEc,QAAQ,CAAE,CACR,CACEC,KAAK,CAAE,oBADT,CAEEC,eAAe,CAAE,oBAFnB,CAGEC,WAAW,CAAE,eAHf,CAIEC,WAAW,CAAE,CAJf,CAKET,IAAI,CAAE,KAAKb,KAAL,CAAWG,UALnB,CADQ,CAFZ,CAjBR,CA8BE,OAAO,CAAE,CACPoB,KAAK,CAAE,CACLC,OAAO,CAAE,IADJ,CAELC,IAAI,CAAE,2BAFD,CAGLC,QAAQ,CAAE,EAHL,CADA,CAMPC,MAAM,CAAE,CACNH,OAAO,CAAE,IADH,CAENI,QAAQ,CAAE,OAFJ,CAND,CA9BX,EADF,CADF,CA7CF,CAHF,CADF,CADF,CAoGD,C,oBAzIkB5C,S,EAoJrB,GAAM8C,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAA9B,KAAK,QAAK,CAChC+B,IAAI,CAAE/B,KAAK,CAAC+B,IADoB,CAEhCd,aAAa,CAAEjB,KAAK,CAACiB,aAFW,CAGhCY,cAAc,CAAE7B,KAAK,CAAC6B,cAHU,CAAL,EAA7B,CAKA;AACA,cAAe5C,CAAAA,OAAO,CAAC6C,eAAD,CAAkB,CACtC5C,UAAU,CAAVA,UADsC,CAEtCC,YAAY,CAAZA,YAFsC,CAGtCC,cAAc,CAAdA,cAHsC,CAAlB,CAAP,CAIZU,MAJY,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { logoutUser } from '../../actions/authActions';\nimport { getOccupancy, getCheckinDash } from '../../actions/dashActions';\nimport Pusher from 'pusher-js';\nimport { Bar, Line } from 'react-chartjs-2';\nimport { classes } from '../Contants/constants/graph';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Navbar from '../Admin/NavBar';\n//Pusher.logToConsole = true;\n\nlet occupancyChannel;\nlet checkinChannel;\n\nclass Charts extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      barValues: '',\n      barLabels: '',\n      lineValues: '',\n      lineLabels: ''\n    };\n  }\n\n  componentDidMount() {\n    this.props.getOccupancy();\n    this.props.getCheckinDash();\n\n    var pusher = new Pusher('da84b590e82a4f23838b', {\n      cluster: 'eu',\n      forceTLS: true\n    });\n    occupancyChannel = pusher.subscribe('occupancy');\n    occupancyChannel.bind('update-places', res => {\n      this.setState({\n        barValues: res.datapointsArray.data,\n        barLabels: res.datapointsArray.labels\n      });\n    });\n\n    checkinChannel = pusher.subscribe('checkinByDay');\n    checkinChannel.bind('update-rentals', res => {\n      this.setState({\n        lineValues: res.datapointsArray.data,\n        lineLabels: res.datapointsArray.labels\n      });\n    });\n  }\n\n  render() {\n    return (\n      <>\n        <div className={classes.root}>\n          <Navbar />\n          <br />\n          <Grid container spacing={3}>\n            <Grid item xs={6}>\n              <Paper className={classes.paper}>\n                <Bar\n                  data={\n                    this.state.barValues === ''\n                      ? {\n                          labels: this.props.charts_places.charts_places.labels,\n                          datasets: [\n                            {\n                              label: '% Occupancy tax',\n                              backgroundColor: 'rgb(255, 0, 0)',\n                              borderColor: 'rgba(0,0,0,1)',\n                              borderWidth: 2,\n                              data: this.props.charts_places.charts_places.data\n                            }\n                          ]\n                        }\n                      : {\n                          labels: this.state.barLabels,\n                          datasets: [\n                            {\n                              label: '% Occupancy tax',\n                              backgroundColor: 'rgb(255, 0, 0)',\n                              borderColor: 'rgba(0,0,0,1)',\n                              borderWidth: 2,\n                              data: this.state.barValues\n                            }\n                          ]\n                        }\n                  }\n                  options={{\n                    title: {\n                      display: true,\n                      text: 'Places occupancy percentage (%)',\n                      fontSize: 20\n                    },\n                    legend: {\n                      display: true,\n                      position: 'right'\n                    }\n                  }}\n                />\n              </Paper>\n            </Grid>\n            <Grid item xs={6}>\n              <Paper className={classes.paper}>\n                <Line\n                  data={\n                    this.state.lineValues === ''\n                      ? {\n                          labels: this.props.charts_checkin.charts_checkin\n                            .labels,\n                          datasets: [\n                            {\n                              label: 'Number of checkins',\n                              backgroundColor: 'rgba(75,192,192,1)',\n                              borderColor: 'rgba(0,0,0,1)',\n                              borderWidth: 2,\n                              data: this.props.charts_checkin.charts_checkin\n                                .data\n                            }\n                          ]\n                        }\n                      : {\n                          labels: this.state.lineLabels,\n                          datasets: [\n                            {\n                              label: 'Number of checkins',\n                              backgroundColor: 'rgba(75,192,192,1)',\n                              borderColor: 'rgba(0,0,0,1)',\n                              borderWidth: 2,\n                              data: this.state.lineValues\n                            }\n                          ]\n                        }\n                  }\n                  options={{\n                    title: {\n                      display: true,\n                      text: 'Number of checkins by day',\n                      fontSize: 20\n                    },\n                    legend: {\n                      display: true,\n                      position: 'right'\n                    }\n                  }}\n                />\n              </Paper>\n            </Grid>\n          </Grid>\n        </div>\n      </>\n    );\n  }\n}\n\nCharts.propTypes = {\n  logoutUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired,\n  charts_places: PropTypes.object.isRequired,\n  charts_checkin: PropTypes.object.isRequired,\n  getOccupancy: PropTypes.func.isRequired,\n  getCheckinDash: PropTypes.func.isRequired\n};\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  charts_places: state.charts_places,\n  charts_checkin: state.charts_checkin\n});\n//connect to redux\nexport default connect(mapStateToProps, {\n  logoutUser,\n  getOccupancy,\n  getCheckinDash\n})(Charts);\n"]},"metadata":{},"sourceType":"module"}