{"ast":null,"code":"import _classCallCheck from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{connect}from'react-redux';import{logoutUser}from'../../actions/authActions';import{getVehicles,getBalance,updateBalance}from'../../actions/clientActions';import ClientNav from'./ClientNav';import{TextInput,Button,Icon}from'react-materialize';import ReactNotification from'react-notifications-component';import'react-notifications-component/dist/theme.css';import{store}from'react-notifications-component';var Balance=/*#__PURE__*/function(_Component){_inherits(Balance,_Component);function Balance(props){var _this;_classCallCheck(this,Balance);_this=_possibleConstructorReturn(this,_getPrototypeOf(Balance).call(this,props));_this.getItems=function(){var balanceValue=_this.props.clients.balance.balance;if(balanceValue<5){return React.createElement(\"div\",{className:\"app-container\"},React.createElement(ReactNotification,null),store.addNotification({title:'Balance!',message:'Your balance is getting to 0',type:'warning',insert:'top',container:'top-right',animationIn:['animated','flash'],animationOut:['animated','zoomOut'],dismiss:{duration:1000,onScreen:true}}));}};_this.onsave=function(){_this.setState(function(prevState){return{disabled:!prevState.disabled};});};_this.onSubmit=function(e){e.preventDefault();var newBalance={id:_this.props.auth.user._id,balance:_this.state.balance};_this.props.updateBalance(newBalance.id,newBalance.balance);window.location.reload();};_this.state={clicked:false,balance:0,disabled:true};return _this;}_createClass(Balance,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.props.getBalance(this.props.auth.user._id);this.timer=setInterval(function(){return _this2.getItems();},5000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.timer);this.timer=null;// here...\n}},{key:\"onclick\",value:function onclick(type){this.setState(function(prevState){return{balance:type==='add'?prevState.balance+1:prevState.balance-1};});}},{key:\"render\",value:function render(){var user=this.props.auth.user;var balance=this.props.clients.balance;return React.createElement(React.Fragment,null,React.createElement(ClientNav,null),React.createElement(\"div\",{style:{textAlign:'center'}},React.createElement(\"h4\",null,\"Hello \",user.username,\"!\"),React.createElement(\"p\",{className:\"flow-text grey-text text-darken-1\"},\"Your Balance is \",balance.balance,\"\\u20AC\"),React.createElement(\"h5\",{className:\"className='flow-text grey-text text-darken-1'\"},\"Do you want to add more funds?\"),React.createElement(\"div\",{className:\"center-align\"},React.createElement(TextInput,{icon:\"euro\",label:\"Insert budget\",type:\"number\",className:\"align-center\",value:this.state.balance,disabled:!this.state.disabled,onClick:this.onsave})),React.createElement(\"div\",{className:\"row\"},React.createElement(Button,{className:\"red\",floating:true,icon:React.createElement(Icon,null,\"add\"),large:true,node:\"button\",onClick:this.onclick.bind(this,'add'),disabled:!this.state.disabled}),React.createElement(Button,{className:\"red\",floating:true,icon:React.createElement(Icon,null,\"delete\"),large:true,node:\"button\",onClick:this.onclick.bind(this,'sub'),disabled:!this.state.disabled}),React.createElement(Button,{className:\"red\",floating:true,icon:React.createElement(Icon,null,\"save\"),large:true,onClick:this.onsave,node:\"button\"})),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",null,React.createElement(Button,{node:\"button\",type:\"submit\",disabled:this.state.disabled,onClick:this.onSubmit},\"Submit\",React.createElement(Icon,{right:true},\"send\")))),this.getItems()));}}]);return Balance;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth,vehicles:state.vehicles,balance:state.balance,clients:state.clients};};export default connect(mapStateToProps,{logoutUser:logoutUser,getVehicles:getVehicles,getBalance:getBalance,updateBalance:updateBalance})(Balance);","map":{"version":3,"sources":["/home/fernando/Documentos/MobilityProject/client/src/components/Clients/Balance.js"],"names":["React","Component","connect","logoutUser","getVehicles","getBalance","updateBalance","ClientNav","TextInput","Button","Icon","ReactNotification","store","Balance","props","getItems","balanceValue","clients","balance","addNotification","title","message","type","insert","container","animationIn","animationOut","dismiss","duration","onScreen","onsave","setState","prevState","disabled","onSubmit","e","preventDefault","newBalance","id","auth","user","_id","state","window","location","reload","clicked","timer","setInterval","clearInterval","textAlign","username","onclick","bind","mapStateToProps","vehicles"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { logoutUser } from '../../actions/authActions';\nimport {\n  getVehicles,\n  getBalance,\n  updateBalance\n} from '../../actions/clientActions';\nimport ClientNav from './ClientNav';\nimport { TextInput, Button, Icon } from 'react-materialize';\nimport ReactNotification from 'react-notifications-component';\nimport 'react-notifications-component/dist/theme.css';\nimport { store } from 'react-notifications-component';\nclass Balance extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { clicked: false, balance: 0, disabled: true };\n  }\n\n  componentDidMount() {\n    this.props.getBalance(this.props.auth.user._id);\n    this.timer = setInterval(() => this.getItems(), 5000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n    this.timer = null; // here...\n  }\n\n  getItems = () => {\n    const balanceValue = this.props.clients.balance.balance;\n\n    if (balanceValue < 5) {\n      return (\n        <div className='app-container'>\n          <ReactNotification />\n          {store.addNotification({\n            title: 'Balance!',\n            message: 'Your balance is getting to 0',\n            type: 'warning',\n            insert: 'top',\n            container: 'top-right',\n            animationIn: ['animated', 'flash'],\n            animationOut: ['animated', 'zoomOut'],\n            dismiss: {\n              duration: 1000,\n              onScreen: true\n            }\n          })}\n        </div>\n      );\n    }\n  };\n\n  onclick(type) {\n    this.setState(prevState => {\n      return {\n        balance: type === 'add' ? prevState.balance + 1 : prevState.balance - 1\n      };\n    });\n  }\n\n  onsave = () => {\n    this.setState(prevState => ({\n      disabled: !prevState.disabled\n    }));\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n\n    const newBalance = {\n      id: this.props.auth.user._id,\n      balance: this.state.balance\n    };\n\n    this.props.updateBalance(newBalance.id, newBalance.balance);\n    window.location.reload();\n  };\n\n  render() {\n    const { user } = this.props.auth;\n    const { balance } = this.props.clients;\n\n    return (\n      <>\n        <ClientNav />\n        <div style={{ textAlign: 'center' }}>\n          <h4>Hello {user.username}!</h4>\n          <p className='flow-text grey-text text-darken-1'>\n            Your Balance is {balance.balance}€\n          </p>\n          <h5 className=\"className='flow-text grey-text text-darken-1'\">\n            Do you want to add more funds?\n          </h5>\n\n          <div className='center-align'>\n            <TextInput\n              icon='euro'\n              label='Insert budget'\n              type='number'\n              className='align-center'\n              value={this.state.balance}\n              disabled={!this.state.disabled}\n              onClick={this.onsave}\n            />\n          </div>\n\n          <div className='row'>\n            <Button\n              className='red'\n              floating\n              icon={<Icon>add</Icon>}\n              large\n              node='button'\n              onClick={this.onclick.bind(this, 'add')}\n              disabled={!this.state.disabled}\n            />\n            <Button\n              className='red'\n              floating\n              icon={<Icon>delete</Icon>}\n              large\n              node='button'\n              onClick={this.onclick.bind(this, 'sub')}\n              disabled={!this.state.disabled}\n            />\n            <Button\n              className='red'\n              floating\n              icon={<Icon>save</Icon>}\n              large\n              onClick={this.onsave}\n              node='button'\n            />\n          </div>\n          <div className='row'>\n            <div>\n              <Button\n                node='button'\n                type='submit'\n                disabled={this.state.disabled}\n                onClick={this.onSubmit}\n              >\n                Submit\n                <Icon right>send</Icon>\n              </Button>\n            </div>\n          </div>\n          {this.getItems()}\n        </div>\n      </>\n    );\n  }\n}\n\nBalance.propTypes = {\n  logoutUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired,\n  getVehicles: PropTypes.func.isRequired,\n  getBalance: PropTypes.func.isRequired,\n  updateBalance: PropTypes.func.isRequired\n};\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  vehicles: state.vehicles,\n  balance: state.balance,\n  clients: state.clients\n});\n\nexport default connect(mapStateToProps, {\n  logoutUser,\n  getVehicles,\n  getBalance,\n  updateBalance\n})(Balance);\n"]},"metadata":{},"sourceType":"module"}