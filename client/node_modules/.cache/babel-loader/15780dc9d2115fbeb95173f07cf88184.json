{"ast":null,"code":"import _defineProperty from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Link}from'react-router-dom';import{connect}from'react-redux';import{loginUser}from'../../actions/authActions';import classnames from'classnames';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(){var _this;_classCallCheck(this,Login);_this=_possibleConstructorReturn(this,_getPrototypeOf(Login).call(this));_this.onChange=function(e){_this.setState(_defineProperty({},e.target.id,e.target.value));};_this.onSubmit=function(e){var _ref=_this.props.location.state||{from:{pathname:'/'}},from=_ref.from;e.preventDefault();var userData={username:_this.state.username,password:_this.state.password};_this.props.loginUser(userData);//\nif(_this.props.auth.user.role==='client'){_this.props.history.replace(from);}if(_this.props.auth.user.role=='admin'){_this.props.history.push('/marParkings');}else if(_this.props.auth.user.role=='employee'){_this.props.history.push('/notifyUsers');// push user to dashboard when they login\n}};_this.state={username:'',password:'',errors:{}};return _this;}//employee\n//admin\n_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){/* if (!this.props.auth.isAuthenticated) {\n      this.props.history.push('/searchVehicles');\n    } */ // If logged in and user navigates to Login page, should redirect them to dashboard\nif(this.props.auth.isAuthenticated){this.props.history.push('/searchVehicles');}if(this.props.auth.isAuthenticated&&this.props.auth.user.role=='employee'){this.props.history.push('/notifyUsers');}if(this.props.auth.isAuthenticated&&this.props.auth.user.role=='admin'){this.props.history.push('/validateUsers');}}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){/* if (!nextProps.auth.isAuthenticated) {\n      this.props.history.push('/places');\n    } */if(nextProps.auth.isAuthenticated){this.props.history.push('/main');// push user to dashboard when they login\n}if(nextProps.auth.isAuthenticated&&nextProps.auth.user.role=='employee'){this.props.history.push('/notifyUsers');// push user to dashboard when they login\n}if(nextProps.auth.isAuthenticated&&nextProps.auth.user.role=='admin'){this.props.history.push('/validateUsers');// push user to dashboard when they login\n}if(nextProps.errors){this.setState({errors:nextProps.errors});}}},{key:\"render\",value:function render(){var errors=this.state.errors;return React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{style:{marginTop:'4rem'},className:\"row\"},React.createElement(\"div\",{className:\"col s8 offset-s2\"},React.createElement(Link,{to:\"/searchVehicles\",className:\"btn-flat waves-effect\"},React.createElement(\"i\",{className:\"material-icons left\"},\"keyboard_backspace\"),\" Back to home\"),React.createElement(\"div\",{className:\"col s12\",style:{paddingLeft:'11.250px'}},React.createElement(\"h4\",null,React.createElement(\"b\",null,\"Login\"),\" below\"),React.createElement(\"p\",{className:\"grey-text text-darken-1\"},\"Don't have an account? \",React.createElement(Link,{to:\"/register\"},\"Register\"))),React.createElement(\"form\",{noValidate:true,onSubmit:this.onSubmit},React.createElement(\"div\",{className:\"input-field col s12\"},React.createElement(\"input\",{onChange:this.onChange,value:this.state.username,error:errors.username,id:\"username\",type:\"text\",className:classnames('',{invalid:errors.username||errors.usernamenotfound})}),React.createElement(\"label\",{htmlFor:\"email\"},\"Username\"),React.createElement(\"span\",{className:\"red-text\"},errors.username,errors.username)),React.createElement(\"div\",{className:\"input-field col s12\"},React.createElement(\"input\",{onChange:this.onChange,value:this.state.password,error:errors.password,id:\"password\",type:\"password\",className:classnames('',{invalid:errors.password||errors.passwordincorrect})}),React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),React.createElement(\"span\",{className:\"red-text\"},errors.password,errors.passwordincorrect)),React.createElement(\"div\",{className:\"col s12\",style:{paddingLeft:'11.250px'}},React.createElement(\"button\",{style:{width:'150px',borderRadius:'3px',letterSpacing:'1.5px',marginTop:'1rem'},type:\"submit\",className:\"btn btn-large waves-effect waves-light hoverable blue accent-3\"},\"Login\"))))));}}]);return Login;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth,errors:state.errors};};export default connect(mapStateToProps,{loginUser:loginUser})(Login);","map":{"version":3,"sources":["/home/fernando/Documentos/MobilityProject/client/src/components/Auth/Login.js"],"names":["React","Component","Link","connect","loginUser","classnames","Login","onChange","e","setState","target","id","value","onSubmit","props","location","state","from","pathname","preventDefault","userData","username","password","auth","user","role","history","replace","push","errors","isAuthenticated","nextProps","marginTop","paddingLeft","invalid","usernamenotfound","passwordincorrect","width","borderRadius","letterSpacing","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { loginUser } from '../../actions/authActions';\nimport classnames from 'classnames';\n\nclass Login extends Component {\n  constructor() {\n    super();\n    this.state = {\n      username: '',\n      password: '',\n      errors: {}\n    };\n  }\n  //employee\n  //admin\n  componentDidMount() {\n    /* if (!this.props.auth.isAuthenticated) {\n      this.props.history.push('/searchVehicles');\n    } */\n    // If logged in and user navigates to Login page, should redirect them to dashboard\n    if (this.props.auth.isAuthenticated) {\n      this.props.history.push('/searchVehicles');\n    }\n\n    if (\n      this.props.auth.isAuthenticated &&\n      this.props.auth.user.role == 'employee'\n    ) {\n      this.props.history.push('/notifyUsers');\n    }\n\n    if (\n      this.props.auth.isAuthenticated &&\n      this.props.auth.user.role == 'admin'\n    ) {\n      this.props.history.push('/validateUsers');\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    /* if (!nextProps.auth.isAuthenticated) {\n      this.props.history.push('/places');\n    } */\n    if (nextProps.auth.isAuthenticated) {\n      this.props.history.push('/main'); // push user to dashboard when they login\n    }\n\n    if (\n      nextProps.auth.isAuthenticated &&\n      nextProps.auth.user.role == 'employee'\n    ) {\n      this.props.history.push('/notifyUsers'); // push user to dashboard when they login\n    }\n\n    if (nextProps.auth.isAuthenticated && nextProps.auth.user.role == 'admin') {\n      this.props.history.push('/validateUsers'); // push user to dashboard when they login\n    }\n\n    if (nextProps.errors) {\n      this.setState({\n        errors: nextProps.errors\n      });\n    }\n  }\n\n  onChange = e => {\n    this.setState({ [e.target.id]: e.target.value });\n  };\n  onSubmit = e => {\n    let { from } = this.props.location.state || { from: { pathname: '/' } };\n    e.preventDefault();\n    const userData = {\n      username: this.state.username,\n      password: this.state.password\n    };\n\n    this.props.loginUser(userData);\n    //\n    if (this.props.auth.user.role === 'client') {\n      this.props.history.replace(from);\n    }\n    if (this.props.auth.user.role == 'admin') {\n      this.props.history.push('/marParkings');\n    } else if (this.props.auth.user.role == 'employee') {\n      this.props.history.push('/notifyUsers'); // push user to dashboard when they login\n    }\n  };\n  render() {\n    const { errors } = this.state;\n    return (\n      <div className='container'>\n        <div style={{ marginTop: '4rem' }} className='row'>\n          <div className='col s8 offset-s2'>\n            <Link to='/searchVehicles' className='btn-flat waves-effect'>\n              <i className='material-icons left'>keyboard_backspace</i> Back to\n              home\n            </Link>\n            <div className='col s12' style={{ paddingLeft: '11.250px' }}>\n              <h4>\n                <b>Login</b> below\n              </h4>\n              <p className='grey-text text-darken-1'>\n                Don't have an account? <Link to='/register'>Register</Link>\n              </p>\n            </div>\n            <form noValidate onSubmit={this.onSubmit}>\n              <div className='input-field col s12'>\n                <input\n                  onChange={this.onChange}\n                  value={this.state.username}\n                  error={errors.username}\n                  id='username'\n                  type='text'\n                  className={classnames('', {\n                    invalid: errors.username || errors.usernamenotfound\n                  })}\n                />\n                <label htmlFor='email'>Username</label>\n                <span className='red-text'>\n                  {errors.username}\n                  {errors.username}\n                </span>\n              </div>\n              <div className='input-field col s12'>\n                <input\n                  onChange={this.onChange}\n                  value={this.state.password}\n                  error={errors.password}\n                  id='password'\n                  type='password'\n                  className={classnames('', {\n                    invalid: errors.password || errors.passwordincorrect\n                  })}\n                />\n                <label htmlFor='password'>Password</label>\n                <span className='red-text'>\n                  {errors.password}\n                  {errors.passwordincorrect}\n                </span>\n              </div>\n              <div className='col s12' style={{ paddingLeft: '11.250px' }}>\n                <button\n                  style={{\n                    width: '150px',\n                    borderRadius: '3px',\n                    letterSpacing: '1.5px',\n                    marginTop: '1rem'\n                  }}\n                  type='submit'\n                  className='btn btn-large waves-effect waves-light hoverable blue accent-3'\n                >\n                  Login\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nLogin.propTypes = {\n  loginUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired,\n  errors: PropTypes.object.isRequired\n};\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  errors: state.errors\n});\nexport default connect(mapStateToProps, { loginUser })(Login);\n"]},"metadata":{},"sourceType":"module"}