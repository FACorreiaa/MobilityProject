{"ast":null,"code":"import _classCallCheck from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/fernando/Documentos/MobilityProject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{BrowserRouter as Router,Route,Switch}from'react-router-dom';import jwt_decode from'jwt-decode';import setAuthToken from'../utils/setAuthToken';import{setCurrentUser,logoutUser}from'../actions/authActions';import{Provider}from'react-redux';import store from'../store';import Navbar from'../components/Navbar/Navbar';import Register from'../components/Auth/Register';import Login from'../components/Auth/Login';import PrivateRoute from'../components/PrivateRoute/PrivateRoute';import Charts from'../components/Dashboard/Charts';import Places from'../components/Places/Places';import Clients from'../components/Clients/Clients';import SearchVehicles from'../components/Clients/SearchVehicles';import Profile from'../components/Clients/Profile';import Balance from'../components/Clients/Balance';import CheckIn from'../components/Clients/Checkin';import Checkout from'../components/Clients/Checkout';import ValidateUsers from'./Admin/ValidateUsers';import CheckParkingData from'./Admin/CheckParkingData';import MapParkings from'./Admin/MapParkings';import NotifyUsers from'./Func/NotifyUsers';import routesConfig from'./PrivateRoute/routesConfig';if(localStorage.jwtToken){// Set auth token header auth\nvar token=localStorage.jwtToken;setAuthToken(token);// Decode token and get user info and exp\nvar decoded=jwt_decode(token);// Set user and isAuthenticated\nstore.dispatch(setCurrentUser(decoded));// Check for expired token\nvar currentTime=Date.now()/1000;// to get in milliseconds\nif(decoded.exp<currentTime){// Logout user\nstore.dispatch(logoutUser());// Redirect to login\nwindow.location.href='./searchVehicles';}}var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){_classCallCheck(this,App);return _possibleConstructorReturn(this,_getPrototypeOf(App).apply(this,arguments));}_createClass(App,[{key:\"render\",value:function render(){return React.createElement(Provider,{store:store},React.createElement(Router,null,React.createElement(\"div\",{className:\"App\"},console.log(routesConfig),React.createElement(Navbar,null),React.createElement(Switch,null,routesConfig.routes.map(function(_ref){var component=_ref.component,roles=_ref.roles,url=_ref.url;return roles.length?React.createElement(PrivateRoute,{exact:true,path:url,component:component,roles:roles}):React.createElement(Route,{exact:true,path:url,component:component});})))));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/home/fernando/Documentos/MobilityProject/client/src/components/App.js"],"names":["React","Component","BrowserRouter","Router","Route","Switch","jwt_decode","setAuthToken","setCurrentUser","logoutUser","Provider","store","Navbar","Register","Login","PrivateRoute","Charts","Places","Clients","SearchVehicles","Profile","Balance","CheckIn","Checkout","ValidateUsers","CheckParkingData","MapParkings","NotifyUsers","routesConfig","localStorage","jwtToken","token","decoded","dispatch","currentTime","Date","now","exp","window","location","href","App","console","log","routes","map","component","roles","url","length"],"mappings":"i1BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,CAAkCC,KAAlC,CAAyCC,MAAzC,KAAuD,kBAAvD,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,uBAAzB,CACA,OAASC,cAAT,CAAyBC,UAAzB,KAA2C,wBAA3C,CACA,OAASC,QAAT,KAAyB,aAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,UAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,6BAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,6BAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,0BAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,yCAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,gCAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,6BAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,+BAApB,CACA,MAAOC,CAAAA,cAAP,KAA2B,sCAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,+BAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,+BAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,+BAApB,CACA,MAAOC,CAAAA,QAAP,KAAqB,gCAArB,CACA,MAAOC,CAAAA,aAAP,KAA0B,uBAA1B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,0BAA7B,CACA,MAAOC,CAAAA,WAAP,KAAwB,qBAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,oBAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,6BAAzB,CAEA,GAAIC,YAAY,CAACC,QAAjB,CAA2B,CACzB;AACA,GAAMC,CAAAA,KAAK,CAAGF,YAAY,CAACC,QAA3B,CACAvB,YAAY,CAACwB,KAAD,CAAZ,CACA;AACA,GAAMC,CAAAA,OAAO,CAAG1B,UAAU,CAACyB,KAAD,CAA1B,CACA;AACApB,KAAK,CAACsB,QAAN,CAAezB,cAAc,CAACwB,OAAD,CAA7B,EACA;AACA,GAAME,CAAAA,WAAW,CAAGC,IAAI,CAACC,GAAL,GAAa,IAAjC,CAAuC;AACvC,GAAIJ,OAAO,CAACK,GAAR,CAAcH,WAAlB,CAA+B,CAC7B;AACAvB,KAAK,CAACsB,QAAN,CAAexB,UAAU,EAAzB,EACA;AACA6B,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,kBAAvB,CACD,CACF,C,GAEKC,CAAAA,G,iPACK,CACP,MACE,qBAAC,QAAD,EAAU,KAAK,CAAE9B,KAAjB,EACE,oBAAC,MAAD,MACE,2BAAK,SAAS,CAAC,KAAf,EACG+B,OAAO,CAACC,GAAR,CAAYf,YAAZ,CADH,CAEE,oBAAC,MAAD,MAFF,CAIE,oBAAC,MAAD,MACGA,YAAY,CAACgB,MAAb,CAAoBC,GAApB,CAAwB,kBAAGC,CAAAA,SAAH,MAAGA,SAAH,CAAcC,KAAd,MAAcA,KAAd,CAAqBC,GAArB,MAAqBA,GAArB,OACvBD,CAAAA,KAAK,CAACE,MAAN,CACE,oBAAC,YAAD,EACE,KAAK,KADP,CAEE,IAAI,CAAED,GAFR,CAGE,SAAS,CAAEF,SAHb,CAIE,KAAK,CAAEC,KAJT,EADF,CAQE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAEC,GAAnB,CAAwB,SAAS,CAAEF,SAAnC,EATqB,EAAxB,CADH,CAJF,CADF,CADF,CADF,CAyBD,C,iBA3Be7C,S,EA6BlB,cAAewC,CAAAA,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport jwt_decode from 'jwt-decode';\nimport setAuthToken from '../utils/setAuthToken';\nimport { setCurrentUser, logoutUser } from '../actions/authActions';\nimport { Provider } from 'react-redux';\nimport store from '../store';\nimport Navbar from '../components/Navbar/Navbar';\nimport Register from '../components/Auth/Register';\nimport Login from '../components/Auth/Login';\nimport PrivateRoute from '../components/PrivateRoute/PrivateRoute';\nimport Charts from '../components/Dashboard/Charts';\nimport Places from '../components/Places/Places';\nimport Clients from '../components/Clients/Clients';\nimport SearchVehicles from '../components/Clients/SearchVehicles';\nimport Profile from '../components/Clients/Profile';\nimport Balance from '../components/Clients/Balance';\nimport CheckIn from '../components/Clients/Checkin';\nimport Checkout from '../components/Clients/Checkout';\nimport ValidateUsers from './Admin/ValidateUsers';\nimport CheckParkingData from './Admin/CheckParkingData';\nimport MapParkings from './Admin/MapParkings';\nimport NotifyUsers from './Func/NotifyUsers';\nimport routesConfig from './PrivateRoute/routesConfig';\n\nif (localStorage.jwtToken) {\n  // Set auth token header auth\n  const token = localStorage.jwtToken;\n  setAuthToken(token);\n  // Decode token and get user info and exp\n  const decoded = jwt_decode(token);\n  // Set user and isAuthenticated\n  store.dispatch(setCurrentUser(decoded));\n  // Check for expired token\n  const currentTime = Date.now() / 1000; // to get in milliseconds\n  if (decoded.exp < currentTime) {\n    // Logout user\n    store.dispatch(logoutUser());\n    // Redirect to login\n    window.location.href = './searchVehicles';\n  }\n}\n\nclass App extends Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <Router>\n          <div className='App'>\n            {console.log(routesConfig)}\n            <Navbar />\n\n            <Switch>\n              {routesConfig.routes.map(({ component, roles, url }) =>\n                roles.length ? (\n                  <PrivateRoute\n                    exact\n                    path={url}\n                    component={component}\n                    roles={roles}\n                  />\n                ) : (\n                  <Route exact path={url} component={component} />\n                )\n              )}\n            </Switch>\n          </div>\n        </Router>\n      </Provider>\n    );\n  }\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}