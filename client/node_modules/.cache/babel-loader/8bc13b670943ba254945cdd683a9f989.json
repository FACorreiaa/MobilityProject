{"ast":null,"code":"import axios from'axios';import setAuthToken from'../utils/setAuthToken';import jwt_decode from'jwt-decode';import{GET_ERRORS,USER_LOADING,SET_CURRENT_USER}from'./types';//Register user\nexport var registerUser=function registerUser(userData,history){return function(dispatch){axios.post(\"\".concat(REACT_APP_HOST,\":\").concat(REACT_APP_PORT,\"/api/v1/register\"),userData).then(function(res){return history.push('/login');}).catch(function(err){return dispatch({type:GET_ERRORS,payload:err.response});});};};//login\nexport var loginUser=function loginUser(userData){return function(dispatch){axios.post(\"\".concat(REACT_APP_HOST,\":\").concat(REACT_APP_PORT,\"/api/v1/login\"),userData).then(function(res){//Save to localstorage\n//Set token to localStorage\nvar token=res.data.token;localStorage.setItem('jwtToken',token);//set token to auth header\nsetAuthToken(token);//decode token to get user data\nvar decoded=jwt_decode(token);//set current user\ndispatch(setCurrentUser(decoded));}).catch(function(err){return dispatch({type:GET_ERRORS,payload:err});});};};//Set loggedin uset\nexport var setCurrentUser=function setCurrentUser(decoded){return{type:SET_CURRENT_USER,payload:decoded};};//User loading\nexport var setUserLoading=function setUserLoading(){return{type:USER_LOADING};};//Log user out\nexport var logoutUser=function logoutUser(){return function(dispatch){//remove token from local storage\nlocalStorage.removeItem('jwtToken');//remove auth header for future requests\nsetAuthToken(false);//set current user to empty object, set isAuth to false\ndispatch(setCurrentUser({}));};};","map":{"version":3,"sources":["/home/fernando/Documentos/MobilityProject/client/src/actions/authActions.js"],"names":["axios","setAuthToken","jwt_decode","GET_ERRORS","USER_LOADING","SET_CURRENT_USER","registerUser","userData","history","dispatch","post","REACT_APP_HOST","REACT_APP_PORT","then","res","push","catch","err","type","payload","response","loginUser","token","data","localStorage","setItem","decoded","setCurrentUser","setUserLoading","logoutUser","removeItem"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,uBAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CAEA,OAASC,UAAT,CAAqBC,YAArB,CAAmCC,gBAAnC,KAA2D,SAA3D,CAEA;AACA,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,QAAD,CAAWC,OAAX,QAAuB,UAAAC,QAAQ,CAAI,CAC7DT,KAAK,CACFU,IADH,WACWC,cADX,aAC6BC,cAD7B,qBAC+DL,QAD/D,EAEGM,IAFH,CAEQ,SAAAC,GAAG,QAAIN,CAAAA,OAAO,CAACO,IAAR,CAAa,QAAb,CAAJ,EAFX,EAGGC,KAHH,CAGS,SAAAC,GAAG,QACRR,CAAAA,QAAQ,CAAC,CACPS,IAAI,CAAEf,UADC,CAEPgB,OAAO,CAAEF,GAAG,CAACG,QAFN,CAAD,CADA,EAHZ,EASD,CAV2B,EAArB,CAYP;AACA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAAAd,QAAQ,QAAI,UAAAE,QAAQ,CAAI,CAC/CT,KAAK,CACFU,IADH,WACWC,cADX,aAC6BC,cAD7B,kBAC4DL,QAD5D,EAEGM,IAFH,CAEQ,SAAAC,GAAG,CAAI,CACX;AACA;AAFW,GAIHQ,CAAAA,KAJG,CAIOR,GAAG,CAACS,IAJX,CAIHD,KAJG,CAKXE,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCH,KAAjC,EAEA;AACArB,YAAY,CAACqB,KAAD,CAAZ,CAEA;AACA,GAAMI,CAAAA,OAAO,CAAGxB,UAAU,CAACoB,KAAD,CAA1B,CAEA;AACAb,QAAQ,CAACkB,cAAc,CAACD,OAAD,CAAf,CAAR,CACD,CAjBH,EAkBGV,KAlBH,CAkBS,SAAAC,GAAG,QACRR,CAAAA,QAAQ,CAAC,CACPS,IAAI,CAAEf,UADC,CAEPgB,OAAO,CAAEF,GAFF,CAAD,CADA,EAlBZ,EAwBD,CAzBgC,EAA1B,CA2BP;AACA,MAAO,IAAMU,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAD,OAAO,CAAI,CACvC,MAAO,CACLR,IAAI,CAAEb,gBADD,CAELc,OAAO,CAAEO,OAFJ,CAAP,CAID,CALM,CAOP;AACA,MAAO,IAAME,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAClC,MAAO,CACLV,IAAI,CAAEd,YADD,CAAP,CAGD,CAJM,CAMP;AACA,MAAO,IAAMyB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,SAAM,UAAApB,QAAQ,CAAI,CAC1C;AACAe,YAAY,CAACM,UAAb,CAAwB,UAAxB,EAEA;AACA7B,YAAY,CAAC,KAAD,CAAZ,CAEA;AACAQ,QAAQ,CAACkB,cAAc,CAAC,EAAD,CAAf,CAAR,CACD,CATyB,EAAnB","sourcesContent":["import axios from 'axios';\nimport setAuthToken from '../utils/setAuthToken';\nimport jwt_decode from 'jwt-decode';\n\nimport { GET_ERRORS, USER_LOADING, SET_CURRENT_USER } from './types';\n\n//Register user\nexport const registerUser = (userData, history) => dispatch => {\n  axios\n    .post(`${REACT_APP_HOST}:${REACT_APP_PORT}/api/v1/register`, userData)\n    .then(res => history.push('/login'))\n    .catch(err =>\n      dispatch({\n        type: GET_ERRORS,\n        payload: err.response\n      })\n    );\n};\n\n//login\nexport const loginUser = userData => dispatch => {\n  axios\n    .post(`${REACT_APP_HOST}:${REACT_APP_PORT}/api/v1/login`, userData)\n    .then(res => {\n      //Save to localstorage\n      //Set token to localStorage\n\n      const { token } = res.data;\n      localStorage.setItem('jwtToken', token);\n\n      //set token to auth header\n      setAuthToken(token);\n\n      //decode token to get user data\n      const decoded = jwt_decode(token);\n\n      //set current user\n      dispatch(setCurrentUser(decoded));\n    })\n    .catch(err =>\n      dispatch({\n        type: GET_ERRORS,\n        payload: err\n      })\n    );\n};\n\n//Set loggedin uset\nexport const setCurrentUser = decoded => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded\n  };\n};\n\n//User loading\nexport const setUserLoading = () => {\n  return {\n    type: USER_LOADING\n  };\n};\n\n//Log user out\nexport const logoutUser = () => dispatch => {\n  //remove token from local storage\n  localStorage.removeItem('jwtToken');\n\n  //remove auth header for future requests\n  setAuthToken(false);\n\n  //set current user to empty object, set isAuth to false\n  dispatch(setCurrentUser({}));\n};\n"]},"metadata":{},"sourceType":"module"}