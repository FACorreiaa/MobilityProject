(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,a){e.exports=a(292)},291:function(e,t,a){},292:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(24),c=a.n(r),s=a(5),o=a(4),i=a(7),u=a(6),p=a(8),m=a(10),d=a(30),h=a(51),E=a.n(h),g=a(12),b=a.n(g),f=function(e){e?b.a.defaults.headers.common.Authotization=e:delete b.a.defaults.headers.common.Authorization},v=function(e){return{type:"SET_CURRENT_USER",payload:e}},y=function(){return function(e){localStorage.removeItem("jwtToken"),f(!1),e(v({}))}},k=a(9),O=a(29),N=a(100),C=a(11),j=a(41),w={isAuthenticated:!1,user:{},loading:!1},S={},x=(a(41),{places:[],loading:!1}),_={vehicles:[],loading:!1,balance:[],methods:[],checkin:{},clients:[],isCheckedIn:!1,consult:[],checkout:[],payment:[],notifiedUser:{}},R=(a(41),{charts_places:[],charts_checkin:[],loading:!1}),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CHARTS_PLACES":return Object(C.a)({},e,{charts_places:t.payload});case"GET_CHECKIN_DASH":return Object(C.a)({},e,{charts_checkin:t.payload});default:return e}},U=(a(41),{isAuthenticated:!1,user:{},loading:!1,validUsers:[],updateUser:[],rental:[]}),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_VALIDATE_USERS":return Object(C.a)({},e,{validUsers:t.payload});case"UPDATE_VALIDATE_USERS":return Object(C.a)({},e,{updateUser:t.payload});case"GET_RENTAL_DATA":return Object(C.a)({},e,{rental:t.payload});case"USER_LOADING":return Object(C.a)({},e,{loading:!0});default:return e}},I={users:{},validated:[]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFY_USER":return Object(C.a)({},e,{users:t.payload});case"GET_VALID_USERS":return Object(C.a)({},e,{validated:t.payload});default:return e}},P=Object(O.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(C.a)({},e,{isAuthenticated:!j(t.payload),user:t.payload});case"USER_LOADING":return Object(C.a)({},e,{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},places:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PLACES":return Object(C.a)({},e,{places:t.payload});case"PLACES_LOADING":return Object(C.a)({},e,{loading:!0});default:return e}},charts_places:T,charts_checkin:T,clients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_VEHICLES":return Object(C.a)({},e,{vehicles:t.payload});case"VEHICLES_LOADING":return Object(C.a)({},e,{loading:!0});case"GET_BALANCE":return Object(C.a)({},e,{balance:t.payload});case"GET_RENTAL_METHODS":return Object(C.a)({},e,{methods:t.payload});case"UPDATE_BALANCE":return Object(C.a)({},e,{balance:t.payload});case"POST_CHECKIN":return Object(C.a)({},e,{isCheckedIn:!0,checkin:t.payload});case"GET_CONSULT":return Object(C.a)({},e,{consult:t.payload});case"PUT_CHECKOUT":return Object(C.a)({},e,{checkout:t.payload});case"GET_USER_NOTIFIED":return Object(C.a)({},e,{notifiedUser:t.payload});case"PUT_PAYMENT":return Object(C.a)({},e,{payment:t.payload});default:return e}},validUsers:A,updateUser:A,rental:A,validated:D,users:D}),L=[N.a],M=Object(O.e)(P,{},Object(O.d)(O.a.apply(void 0,L),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),V=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"navbar-fixed"},l.a.createElement("nav",{className:"z-depth-0"},l.a.createElement("div",{className:"nav-wrapper white"},l.a.createElement(m.b,{to:"/",style:{fontFamily:"monospace"},className:"col s5 brand-logo center black-text"},l.a.createElement("i",{className:"material-icons"},"code"),"MERN"))))}}]),t}(n.Component),F=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 center-align"},l.a.createElement("h4",null,l.a.createElement("b",null,"Build")," a login/auth app with the"," ",l.a.createElement("span",{style:{fontFamily:"monospace"}},"MERN")," stack from scratch"),l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Create a (minimal) full-stack app with user authentication via passport and JWTs"),l.a.createElement("br",null),l.a.createElement("div",{className:"col s6"},l.a.createElement(m.b,{to:"/register",style:{borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable grey accent-3"},"Register")),l.a.createElement("div",{className:"col s3"},l.a.createElement(m.b,{to:"/login",style:{borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable grey accent-3"},"Log In")),l.a.createElement("div",{className:"col s3"},l.a.createElement(m.b,{to:"/places",style:{borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable grey accent-3"},"Free version")))))}}]),t}(n.Component),B=a(27),G=a(3),H=a.n(G),Y=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).onChange=function(t){e.setState(Object(B.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={username:e.state.username,firstname:e.state.firstname,lastname:e.state.lastname,email:e.state.email,password:e.state.password};console.log(a),e.props.registerUser(a,e.props.history)},e.state={username:"",firstname:"",lastname:"",email:"",password:"",errors:{}},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s8 offset-s2"},l.a.createElement(m.b,{to:"/",className:"btn-flat waves-effect"},l.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),l.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},l.a.createElement("h4",null,l.a.createElement("b",null,"Register")," below"),l.a.createElement("p",{className:"grey-text text-darken-1"},"Already have an account? ",l.a.createElement(m.b,{to:"/login"},"Log in"))),l.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.username,error:e.username,id:"username",type:"text",className:H()("",{invalid:e.username})}),l.a.createElement("label",{htmlFor:"name"},"Username"),l.a.createElement("span",{className:"red-text"},e.name)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.firstname,error:e.firstname,id:"firstname",type:"text",className:H()("",{invalid:e.firstname})}),l.a.createElement("label",{htmlFor:"name"},"First Name"),l.a.createElement("span",{className:"red-text"},e.firstname)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.lastname,error:e.lastname,id:"lastname",type:"text",className:H()("",{invalid:e.lastname})}),l.a.createElement("label",{htmlFor:"name"},"Last name"),l.a.createElement("span",{className:"red-text"},e.lastname)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:H()("",{invalid:e.email})}),l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("span",{className:"red-text"},e.email)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:H()("",{invalid:e.password})}),l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("span",{className:"red-text"},e.password)),l.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},l.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Sign up"))))))}}]),t}(n.Component),W=Object(k.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){b.a.post("http://localhost:5002/api/v1/register",e).then((function(e){return t.push("/login")})).catch((function(e){return a({type:"GET_ERRORS",payload:e.response})}))}}})(Object(d.g)(Y)),J=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).onChange=function(t){e.setState(Object(B.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={username:e.state.username,password:e.state.password};console.log(a),e.props.loginUser(a)},e.state={username:"",password:"",errors:{}},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated||this.props.history.push("/login"),this.props.auth.isAuthenticated&&"client"==this.props.auth.user.role&&!this.props.auth.user.waitValidation&&this.props.history.push("/searchVehicles"),this.props.auth.isAuthenticated&&"employee"==this.props.auth.user.role&&!this.props.auth.user.waitValidation&&this.props.history.push("/notifyUsers"),this.props.auth.isAuthenticated&&"admin"==this.props.auth.user.role&&!this.props.auth.user.waitValidation&&this.props.history.push("/validateUsers")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&"client"==e.auth.user.role&&this.props.history.push("/searchVehicles"),e.auth.isAuthenticated&&"employee"==e.auth.user.role&&this.props.history.push("/notifyUsers"),e.auth.isAuthenticated&&"admin"==e.auth.user.role&&this.props.history.push("/validateUsers"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{style:{marginTop:"4rem"},className:"row"},l.a.createElement("div",{className:"col s8 offset-s2"},l.a.createElement(m.b,{to:"/",className:"btn-flat waves-effect"},l.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),l.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},l.a.createElement("h4",null,l.a.createElement("b",null,"Login")," below"),l.a.createElement("p",{className:"grey-text text-darken-1"},"Don't have an account? ",l.a.createElement(m.b,{to:"/register"},"Register"))),l.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.username,error:e.username,id:"username",type:"text",className:H()("",{invalid:e.username||e.usernamenotfound})}),l.a.createElement("label",{htmlFor:"email"},"Username"),l.a.createElement("span",{className:"red-text"},e.username,e.username)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:H()("",{invalid:e.password||e.passwordincorrect})}),l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("span",{className:"red-text"},e.password,e.passwordincorrect)),l.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},l.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Login"))))))}}]),t}(n.Component),z=Object(k.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:function(e){return function(t){b.a.post("http://localhost:5002/api/v1/login",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),f(a);var n=E()(a);t(v(n))})).catch((function(e){return t({type:"GET_ERRORS",payload:e})}))}}})(J),K=a(104),q=Object(k.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(K.a)(e,["component","auth"]);return l.a.createElement(d.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?l.a.createElement(t,e):l.a.createElement(d.a,{to:"/login"})}}))})),X=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).onLogoutClick=function(e){e.preventDefault(),a.props.logoutUser()},a.onDashboardClick=function(){a.props.history.push("/charts")},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.auth.user;return l.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 center-align"},l.a.createElement("h4",null,l.a.createElement("b",null,"Hey there,")," ",e.username,l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"You are logged into a full-stack"," ",l.a.createElement("span",{style:{fontFamily:"monospace"}},"MERN")," app \ud83d\udc4f")),l.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:this.onLogoutClick,className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Logout"),l.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:this.onDashboardClick,className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"DASHBOARD"))))}}]),t}(n.Component),Z=Object(k.b)((function(e){return{auth:e.auth}}),{logoutUser:y})(X),Q=a(68),$=a.n(Q),ee=a(102);$.a.logToConsole=!0;var te=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={options:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.getOccupancy()}},{key:"componentDidMount",value:function(){var e=this,t=new $.a("da84b590e82a4f23838b",{cluster:"eu",forceTLS:!0});t.subscribe("occupancy").bind("update-places",(function(t){console.log("RES",t),e.setState({options:t.values}),console.log("statSTATEEEEEEEEEEEEEEEEE"+JSON.stringify(e.state))}))}},{key:"render",value:function(){this.props.charts_places.charts_places;console.log("state render "+JSON.stringify(this.state)),console.log("charts_places HUE"+JSON.stringify(this.props.charts_places.charts_places.data));var e=this.props.auth.user;return l.a.createElement("div",{style:{height:"75vh"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",null,l.a.createElement("h4",null,l.a.createElement("b",{style:{display:"flex"}}," Hey there, ",e.username),l.a.createElement("p",{style:{display:"flex"},className:"flow-text grey-text text-darken-1"},"Mobility Charts Dashboard")),l.a.createElement("br",null),l.a.createElement("div",null))),l.a.createElement("div",{class:"container"}),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(ee.a,{data:""===this.state.options?{labels:["January","February"],datasets:[{label:"Rainfall",backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:this.props.charts_places.charts_places.data}]}:{labels:["January","February"],datasets:[{label:"Rainfall",backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:this.state.options}]},options:{title:{display:!0,text:"Average Rainfall per month",fontSize:20},legend:{display:!0,position:"right"}}})))}}]),t}(n.Component),ae=Object(k.b)((function(e){return{auth:e.auth,charts_places:e.charts_places}}),{logoutUser:y,getOccupancy:function(){return function(e){return b.a.get("http://localhost:5002/api/v1/dashboard/places/occupancy_rate").then((function(t){return e({type:"GET_CHARTS_PLACES",payload:t.data})})).catch((function(t){return e({type:"GET_ERRORS",payload:t})}))}},getCheckinDash:function(){return function(e){return b.a.get("http://localhost:5002/api/v1/dashboard/rentals/date/count").then((function(t){return e({type:"GET_CHECKIN_DASH",payload:t.data})})).catch((function(t){return e({type:"GET_ERRORS",payload:t})}))}}})(te),ne=function(){return function(e){return b.a.get("http://localhost:5002/api/v1/place").then((function(t){return e({type:"GET_PLACES",payload:t.data})})).catch((function(t){return e({type:"GET_ERRORS",payload:t})}))}},le=a(18),re=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.initialCenter,t=this.props.position,a=this.props.paths,n=this.props.style,r=this.props.center,c=this.props.google;return l.a.createElement(le.Map,{google:c,zoom:18,initialCenter:e,style:n,center:r},l.a.createElement(le.Marker,{onClick:this.onMarkerClick,name:"Current location",position:t}),l.a.createElement(le.InfoWindow,{onClose:this.onInfoWindowClose},l.a.createElement("div",null,l.a.createElement("h1",null,"Test"))),l.a.createElement(le.Polygon,{paths:a,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.35}))}}]),t}(n.Component),ce=Object(le.GoogleApiWrapper)({apiKey:"AIzaSyAoJ4VmiODVuUDnOBuYq5ZGC3x7gHkVppg"})(re);function se(){return l.a.createElement("div",null,l.a.createElement("nav",{style:{fontFamily:"monospace"}},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("a",{href:"#",className:"brand-logo right"},"MERN"),l.a.createElement("ul",{id:"nav-mobile",className:"center hide-on-med-and-down"},l.a.createElement("li",null,l.a.createElement(m.b,{to:"/login"},"Login")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/register"},"Register"))))))}var oe=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getPlaces()}},{key:"render",value:function(){console.log(this.props);var e=this.props.auth.user,t=(this.props.places.places,this.props.places.places.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement("div",{className:"row center-align"},l.a.createElement("div",{className:"col"},l.a.createElement("p",null,l.a.createElement("b",null,"Capacity: "),l.a.createElement("span",null,e.capacity))),l.a.createElement("div",{className:"col"},l.a.createElement("p",null,l.a.createElement("b",null,"Quantity: "),l.a.createElement("span",null,e.quantity))),l.a.createElement("div",{className:"col"},l.a.createElement("p",null,l.a.createElement("b",null,"Postal Code: "),l.a.createElement("span",null,e.cp)))))})));return l.a.createElement("div",null,l.a.createElement(se,null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 center-align"},l.a.createElement("h4",null,l.a.createElement("b",null,"Hey there,")," ",0===Object.entries(e).length&&e.constructor===Object?"Guest":e.username,l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},l.a.createElement("span",{style:{fontFamily:"monospace"}},"MERN")," app \ud83d\udc4f"),l.a.createElement("b",null,"Check our places"),l.a.createElement("p",null,"Or Register here to have full access")),l.a.createElement("div",null,t),l.a.createElement(ce,{center:{lat:41.53113384600326,lng:-8.619018495082855},position:{lat:41.53113384600326,lng:-8.619018495082855},paths:[{lat:41.53113384600326,lng:-8.619018495082855},{lat:41.53113384600326,lng:-8.61851692199707},{lat:41.53129447698251,lng:-8.61851692199707},{lat:41.53129447698251,lng:-8.619018495082855},{lat:41.53113384600326,lng:-8.619018495082855}],style:{height:"400px",width:"100%"}}))))}}]),t}(n.Component),ie=Object(k.b)((function(e){return{auth:e.auth,places:e.places}}),{logoutUser:y,getPlaces:ne})(oe),ue=function(){return function(e){return b.a.get("http://localhost:5002/api/v1/vehicles").then((function(t){return e({type:"GET_VEHICLES",payload:t.data})})).catch((function(t){return e({type:"GET_ERRORS",payload:t})}))}},pe=function(e,t,a,n,l){return function(r){return b.a.post("http://localhost:5002/api/v1/rental/checkin/user/".concat(e,"/vehicle/").concat(t,"/").concat(a,"/lat/").concat(n,"/lon/").concat(l)).then((function(e){return r({type:"POST_CHECKIN",payload:e.data})})).catch((function(e){return r({type:"POST_CHECKIN_ERROR",payload:e})}))}},me=a(2);function de(){return l.a.createElement("div",null,l.a.createElement("nav",{style:{fontFamily:"monospace"}},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("a",{href:"#",className:"brand-logo right"},"MERN"),l.a.createElement("ul",{id:"nav-mobile",className:"center hide-on-med-and-down"},l.a.createElement("li",null,l.a.createElement(m.b,{to:"/main"},"List of Vehicles")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/searchVehicles"},"Search Vehicles")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/balance"},"Balance")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/checkin"},"Checkin")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/logout"},"Logout"))))))}var he=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getVehicles()}},{key:"render",value:function(){this.props.auth.user;var e=this.props.clients.vehicles;return console.log(this.props),l.a.createElement(l.a.Fragment,null,l.a.createElement(de,null),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("h4",null,"List of Vehicles"),l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Want to use one? Just check in now here!")),l.a.createElement(me.Table,{centered:"true",responsible:"true"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{"data-field":"id"},"Code"),l.a.createElement("th",{"data-field":"name"},"Description"),l.a.createElement("th",{"data-field":"price"},"Available"))),e.map((function(e){return l.a.createElement("tbody",{key:e._id},l.a.createElement("tr",null,l.a.createElement("td",null,e.code),l.a.createElement("td",null,e.description),l.a.createElement("td",null,e.available?"Available":"Not Available")))}))))}}]),t}(n.Component),Ee=Object(k.b)((function(e){return{auth:e.auth,vehicles:e.vehicles,clients:e.clients}}),{logoutUser:y,getVehicles:ue})(he),ge=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).renderMarker=function(e){return l.a.createElement(le.Marker,{key:e._id,position:e})},a.renderPolygon=function(e){return l.a.createElement(le.Polygon,{paths:e,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.35})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.initialCenter,t=this.props.markerPositions,a=(this.props.polygonPositions,this.props.style),n=this.props.center,r=this.props.paths;return console.log(this.props),l.a.createElement(le.Map,{google:this.props.google,zoom:18,initialCenter:e,style:a,center:n},t.map(this.renderMarker),l.a.createElement(le.Polygon,{paths:r,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.35}))}}]),t}(n.Component),be=Object(le.GoogleApiWrapper)({apiKey:"AIzaSyAoJ4VmiODVuUDnOBuYq5ZGC3x7gHkVppg"})(ge),fe=a(31),ve=a.n(fe),ye=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e,t,n){a.setState({address:e})},a.handleSelect=function(e){a.setState({address:e}),Object(fe.geocodeByAddress)(e).then((function(e){return Object(fe.getLatLng)(e[0])})).then((function(e){a.setState({lat:e.lat,lng:e.lng}),console.log(a.state)})).catch((function(e){return console.error("Error",e)}))},a.state={address:"",lat:"",lng:"",value:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getPlaces()}}]),Object(o.a)(t,[{key:"render",value:function(){console.log(this.state);var e=this.props.places.places.map((function(e){return{lat:e.center[0],lng:e.center[1]}}));console.log(e);var t=[{lat:41.53113384600326,lng:-8.619018495082855},{lat:41.53113384600326,lng:-8.61851692199707},{lat:41.53129447698251,lng:-8.61851692199707},{lat:41.53129447698251,lng:-8.619018495082855},{lat:41.53113384600326,lng:-8.619018495082855}];console.log("t",JSON.stringify(t));var a=this.state.lat,n=this.state.lng,r={};return""!==this.state.lat&&""!==this.state.lng&&(r={lat:a,lng:n}),l.a.createElement("div",null,l.a.createElement(de,null,l.a.createElement("button",null,"oi")),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Input the name of the street")),l.a.createElement("div",{className:"container valign-wrapper"},l.a.createElement("div",{className:"row center-align s12"},l.a.createElement("div",{className:"col"},l.a.createElement(ve.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},(function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,r=e.loading;return l.a.createElement("div",null,l.a.createElement("input",t({placeholder:"Search Places ...",className:"location-search-input"})),l.a.createElement("div",{className:"autocomplete-dropdown-container"},r&&l.a.createElement("div",null,"Loading..."),a.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return l.a.createElement("div",n(e,{className:t,style:a}),l.a.createElement("span",null,e.description))}))))}))))),l.a.createElement(be,{initialCenter:{lat:41.53113384600326,lng:-8.619018495082855},paths:t,style:{height:"400px",width:"100%"},center:r,markerPositions:e}))}}]),t}(n.Component),ke=Object(k.b)((function(e){return{auth:e.auth,places:e.places,clients:e.clients}}),{logoutUser:y,getPlaces:ne})(ye),Oe=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getVehicles()}},{key:"render",value:function(){var e=this.props.auth.user;this.props.clients.vehicles;return console.log(this.props),l.a.createElement(l.a.Fragment,null,l.a.createElement(de,null),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("h4",null,"Your profile ",e.username),l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Edit your profile or charge your account!")),l.a.createElement("div",{className:"row center-align"},l.a.createElement("div",{className:"col s4"},l.a.createElement(me.TextInput,{label:"Firstname",placeholder:"First Name"})),l.a.createElement("div",{className:"col s4"},l.a.createElement(me.TextInput,{label:"Lastname",placeholder:"Last Name"})),l.a.createElement("div",{className:"col s4"},l.a.createElement(me.TextInput,{label:"Age",placeholder:"Age"}))),l.a.createElement("div",{className:"row center-align"},l.a.createElement("div",{className:"col s4"},l.a.createElement(me.TextInput,{label:"City",placeholder:"City"})),l.a.createElement("div",{className:"col s4"},l.a.createElement(me.TextInput,{label:"Street",placeholder:"Street"})),l.a.createElement("div",{className:"col s4"},l.a.createElement(me.TextInput,{label:"Contact",placeholder:"Contact"}))),l.a.createElement("div",{className:"row center-align"},l.a.createElement("div",{className:"col s4"},l.a.createElement(me.TextInput,{label:"School",placeholder:"School"})),l.a.createElement("div",{className:"col s4"},l.a.createElement(me.TextInput,{label:"Education",placeholder:"Education"})),l.a.createElement("div",{className:"col s4"},l.a.createElement(me.TextInput,{label:"About you",placeholder:"About you"}))),l.a.createElement("div",{className:"center-align"},l.a.createElement(me.Button,{node:"button",type:"submit",waves:"light"},"Submit",l.a.createElement(me.Icon,{right:!0},"send")),l.a.createElement(me.Button,{node:"button",type:"cancel",waves:"dark"},"Cancel",l.a.createElement(me.Icon,{right:!0},"cancel"))))}}]),t}(n.Component),Ne=Object(k.b)((function(e){return{auth:e.auth,vehicles:e.vehicles}}),{logoutUser:y,getVehicles:ue})(Oe),Ce=a(28),je=a.n(Ce),we=(a(98),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getItems=function(){var e=a.props.clients.balance.balance;if(console.log("balanceValue",e),e<400)return l.a.createElement("div",{className:"app-container"},l.a.createElement(je.a,null),Ce.store.addNotification({title:"Balance!",message:"Your balance is getting to 0",type:"warning",insert:"top",container:"top-right",animationIn:["animated","flash"],animationOut:["animated","zoomOut"],dismiss:{duration:1e3,onScreen:!0}}))},a.onsave=function(){a.setState((function(e){return{disabled:!e.disabled}}))},a.onSubmit=function(e){e.preventDefault();var t={id:a.props.auth.user._id,balance:a.state.balance};a.props.updateBalance(t.id,t.balance),window.location.reload()},a.state={clicked:!1,balance:0,disabled:!0},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getBalance(this.props.auth.user._id),this.timer=setInterval((function(){return e.getItems()}),2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=null}},{key:"onclick",value:function(e){this.setState((function(t){return{balance:"add"==e?t.balance+1:t.balance-1}}))}},{key:"render",value:function(){var e=this.props.auth.user,t=this.props.clients.balance;return l.a.createElement(l.a.Fragment,null,l.a.createElement(de,null),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("h4",null,"Hello ",e.username,"!"),l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Your Balance is ",t.balance,"\u20ac"),l.a.createElement("h5",{className:"className='flow-text grey-text text-darken-1'"},"Do you want to add more funds?"),l.a.createElement("div",{className:"center-align"},l.a.createElement(me.TextInput,{icon:"euro",label:"Insert budget",type:"number",className:"align-center",value:this.state.balance,disabled:!this.state.disabled,onClick:this.onsave})),l.a.createElement("div",{className:"row"},l.a.createElement(me.Button,{className:"red",floating:!0,icon:l.a.createElement(me.Icon,null,"add"),large:!0,node:"button",onClick:this.onclick.bind(this,"add"),disabled:!this.state.disabled}),l.a.createElement(me.Button,{className:"red",floating:!0,icon:l.a.createElement(me.Icon,null,"delete"),large:!0,node:"button",onClick:this.onclick.bind(this,"sub"),disabled:!this.state.disabled}),l.a.createElement(me.Button,{className:"red",floating:!0,icon:l.a.createElement(me.Icon,null,"save"),large:!0,onClick:this.onsave,node:"button"})),l.a.createElement("div",{className:"row"},l.a.createElement("div",null,l.a.createElement(me.Button,{node:"button",type:"submit",disabled:this.state.disabled,onClick:this.onSubmit},"Submit",l.a.createElement(me.Icon,{right:!0},"send")))),this.getItems()))}}]),t}(n.Component)),Se=Object(k.b)((function(e){return{auth:e.auth,vehicles:e.vehicles,balance:e.balance,clients:e.clients}}),{logoutUser:y,getVehicles:ue,getBalance:function(e){return function(t){return b.a.get("http://localhost:5002/api/v1/users/".concat(e,"/balance")).then((function(e){return t({type:"GET_BALANCE",payload:e.data})})).catch((function(e){return t({type:"BALANCE_ERROR",payload:e})}))}},updateBalance:function(e,t){return function(a){return b.a.put("http://localhost:5002/api/v1/users/".concat(e,"/balance/").concat(t)).then((function(e){return a({type:"UPDATE_BALANCE",payload:e})})).catch((function(e){return a({type:"BALANCE_ERROR",payload:e})}))}}})(we),xe=a(25),_e=a(69),Re=a.n(_e),Te=(a(289),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getNotification=function(){if(a.props.clients.notifiedUser.notified)return l.a.createElement("div",{className:"app-container"},l.a.createElement(je.a,null),Ce.store.addNotification({title:"Wrong Parking!",message:"Your vehicle is in the wrong place",type:"warning",insert:"top",container:"top-right",animationIn:["animated","zoomIn"],animationOut:["animated","zoomOut"],dismiss:{duration:1e3,onScreen:!0}}))},a.onSubmit=function(e){e.preventDefault();var t={user:a.props.auth.user._id,id:a.state.vehicle.value,rentalMethod:a.state.rentalMethod.value,lat:JSON.stringify(a.state.lat),lon:JSON.stringify(a.state.lon)};a.props.postCheckIn(t.user,t.id,t.rentalMethod,t.lat,t.lon),a.setState((function(e){return{disabled:!e.disabled,checkin:!e.checkin}})),a.props.clients.isCheckIn=!a.props.clients.isCheckIn},a.onConsult=function(e){e.preventDefault(),a.props.getConsult(a.props.clients.checkin._id),setTimeout((function(){a.setState((function(e){return{canRender:!e.canRender}}))}),100)},a.state={vehicle:"",rentalMethod:"",lat:"",lon:"",disabled:!1,checkin:!1,price:"",previewCost:"",timeSpent:"",canRender:!1},a._onSelect=a._onSelect.bind(Object(xe.a)(a)),a._onMethodSelect=a._onMethodSelect.bind(Object(xe.a)(a)),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getVehicles(),this.props.getRentalMethods(),this.props.getNotifiedUser(this.props.auth.user._id),this.timer=setInterval((function(){return e.getNotification()}),2e3),navigator.geolocation.getCurrentPosition((function(t){e.setState({lat:t.coords.latitude,lon:t.coords.longitude})}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=null}}]),Object(o.a)(t,[{key:"_onSelect",value:function(e){this.setState({vehicle:e})}},{key:"_onMethodSelect",value:function(e){this.setState({rentalMethod:e})}},{key:"render",value:function(){var e=this.props.auth.user,t=this.props.clients.vehicles,a=this.props.clients.methods,n=(this.props.clients.consult,this.props.clients.notifiedUser,t.filter((function(e){return!0===e.available}))),r=a.map((function(e){return e.rentalMethod})),c=this.state.vehicle,s=this.state.rentalMethod,o="string"===typeof this.state.vehicle?this.state.vehicle:this.state.vehicle.label,i="string"===typeof this.state.rentalMethod?this.state.rentalMethod:this.state.rentalMethod.label;return l.a.createElement(l.a.Fragment,null,l.a.createElement(de,null),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Hello ",e.username,"! Checkin with us now!"),l.a.createElement("div",{className:"row"},l.a.createElement("section",null,l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Pick your Vehicle"),l.a.createElement("div",{className:"col s6"},l.a.createElement(Re.a,{options:n.map((function(e){return e._id})),onChange:this._onSelect,value:c,placeholder:"Select an option",disabled:this.state.disabled})),l.a.createElement("div",{className:"col s6 result"},"Your vehicle",l.a.createElement("strong",null," ",o," ")))),l.a.createElement("div",{className:"row"},l.a.createElement("section",null,l.a.createElement("h5",{className:"flow-text grey-text text-darken-1"},"Pick your rental method"),l.a.createElement("div",{className:"col s6"},l.a.createElement(Re.a,{options:r,onChange:this._onMethodSelect,value:s,placeholder:"Select an option",disabled:this.state.disabled})),l.a.createElement("div",{className:"result col s6"},"Your Rental Method",l.a.createElement("strong",null," ",i," ")))),l.a.createElement("section",null,l.a.createElement("div",{className:"center-align"},l.a.createElement(me.Button,{node:"button",type:"submit",onClick:this.onSubmit,disabled:this.state.disabled},"Checkin",l.a.createElement(me.Icon,{right:!0},"send")),this.getNotification())),l.a.createElement("div",{className:"flow-text grey-text text-darken-2"},this.state.checkin?l.a.createElement("div",null,l.a.createElement("div",{className:"bg-blue-100 border-t border-b border-blue-500 text-blue-700 px-4 py-3",role:"alert"},l.a.createElement("p",{className:"font-bold"},"Careful!"),l.a.createElement("p",{className:"text-sm"},"You are already checked in")),l.a.createElement(me.Button,{node:"button",type:"submit",onClick:this.onConsult},"Check your time estimative!",l.a.createElement(me.Icon,{right:!0},"send")),this.state.canRender?l.a.createElement("section",null,l.a.createElement("div",null,l.a.createElement("span",null,"Base price is:"," ",l.a.createElement("strong",null,this.props.clients.consult.price))),l.a.createElement("div",null,l.a.createElement("span",null,"Your preview cost is:"," ",l.a.createElement("strong",null,this.props.clients.consult.previewCost))),l.a.createElement("div",null,l.a.createElement("span",null,"Time spend:"," ",l.a.createElement("strong",null,this.props.clients.consult.timeSpent))),l.a.createElement(m.c,{to:{pathname:"/checkout",state:Object(C.a)({},this.props.clients.consult)}},l.a.createElement(me.Button,{node:"button",type:"submit"},"Checkout",l.a.createElement(me.Icon,{right:!0},"send"))),this.props.clients.consult.paymentComplete?l.a.createElement(m.b,{to:"/checkout"},"Payment incomplete. Click here to redirect!"):""):""):l.a.createElement("div",{className:"bg-blue-100 border-t border-b border-blue-500 text-blue-700 px-4 py-3",role:"alert"},l.a.createElement("p",{className:"font-bold"},"What are you waiting for?"),l.a.createElement("p",{className:"text-sm"},"You are not checked in")))))}}]),t}(n.Component)),Ue=Object(k.b)((function(e){return{auth:e.auth,vehicles:e.vehicles,methods:e.methods,checkin:e.checkin,consult:e.consult,clients:e.clients,notifiedUser:e.notifiedUser}}),{logoutUser:y,getVehicles:ue,getRentalMethods:function(){return function(e){return b.a.get("http://localhost:5002/api/v1/rental/rentalMethods").then((function(t){return e({type:"GET_RENTAL_METHODS",payload:t.data})})).catch((function(t){return e({type:"RENTAL_METHODS_ERROR",payload:t})}))}},postCheckIn:pe,getConsult:function(e){return function(t){return b.a.get("http://localhost:5002/api/v1/rental/consult/".concat(e)).then((function(e){return t({type:"GET_CONSULT",payload:e.data})})).catch((function(e){return t({type:"CONSULT_ERROR",payload:e})}))}},getNotifiedUser:function(e){return function(t){return b.a.get("http://localhost:5002/api/v1/users/".concat(e)).then((function(e){return t({type:"GET_USER_NOTIFIED",payload:e.data})})).catch((function(e){return t({type:"CONSULT_ERROR",payload:e})}))}}})(Te),Ae=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState({address:e})},a.handleSelect=function(e){a.setState({address:e}),Object(fe.geocodeByAddress)(e).then((function(e){return Object(fe.getLatLng)(e[0])})).then((function(e){console.log("latlng"+e),a.setState({lat:e.lat,lng:e.lng,canRender:!0})})).catch((function(e){return console.error("Error",e)}))},a.checkoutNow=function(e){e.preventDefault();var t={id:a.props.clients.checkin._id,vehicle:a.props.clients.checkin.vehicle,lat:a.state.lat,lon:a.state.lng,address:a.state.address};a.props.updateCheckout(t.id,t.vehicle,t.lat,t.lon,t.address),setTimeout((function(){a.setState({checkout:a.props.clients.checkin.checkout,rentalMethod:a.props.clients.checkout.rentalMethod,previewCost:a.props.clients.checkout.previewCost,timeSpent:a.props.clients.checkout.timeSpent,hasDiscount:a.props.clients.checkout.hasDiscount})}),500)},a.updatePayment=function(e){e.preventDefault();var t={id:a.props.clients.checkout._id};console.log(t),a.props.updatePayment(t.id),setTimeout((function(){a.setState({finalCost:a.props.clients.payment.finalCost})}),1e3)},a.redirectNow=function(){return setInterval((function(){a.setState({count:a.state.count-1})}),2e3),l.a.createElement("div",null,l.a.createElement("div",null,"Refreshing in ",a.state.count),0!==a.state.count?"":l.a.createElement("div",null,l.a.createElement(d.a,{to:"/balance",state:!1===a.props.clients.isCheckIn})))},a.state={address:"",lat:"",lng:"",value:"",canRender:!1,checkout:!1,hasPayment:!1,payment:"",finalCost:0,count:3,disabled:!1,rentalMethod:"",timeSpent:0,previewCost:0,hasDiscount:!0},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e={lat:this.state.lat,lng:this.state.lng},t=this.state.lat,a=this.state.lng,n={lat:41.53113384600326,lng:-8.619018495082855};return""!==this.state.lat&&""!==this.state.lng&&(n={lat:t,lng:a}),console.log(this.props),l.a.createElement("div",null,l.a.createElement(de,null),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("h3",{className:"flow-text grey-text text-darken-1"},"Checkout your location please!")),l.a.createElement("div",{className:"container valign-wrapper"},l.a.createElement("div",{className:"row center-align s12"},l.a.createElement("div",{className:"col"},l.a.createElement(ve.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},(function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,r=e.loading;return l.a.createElement("div",null,l.a.createElement("input",t({placeholder:"Search Places ...",className:"location-search-input"})),l.a.createElement("div",{className:"autocomplete-dropdown-container"},r&&l.a.createElement("div",null,"Loading..."),a.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return l.a.createElement("div",n(e,{className:t,style:a}),l.a.createElement("span",null,e.description))}))))}))))),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(me.Button,{node:"button",type:"submit",onClick:this.checkoutNow,disabled:this.state.disabled},"Checkout",l.a.createElement(me.Icon,{right:!0},"send")),console.log("1"+this.props.clients.checkout.checkout),console.log("2"+this.props.clients.checkout.paymentComplete),console.log(this.props.clients.checkout.paymentComplete),this.props.clients.checkout.checkout&&!this.props.clients.checkout.paymentComplete?l.a.createElement("div",null,l.a.createElement(me.Row,{key:0},l.a.createElement(me.Col,{m:12,s:12},l.a.createElement(me.Card,{actions:[l.a.createElement(me.Button,{node:"button",type:"submit",onClick:this.updatePayment,disabled:this.state.disabled},"Pay now!",l.a.createElement(me.Icon,{right:!0},"send"))],className:"blue-grey darken-1",closeicon:l.a.createElement(me.Icon,null,"close"),revealicon:l.a.createElement(me.Icon,null,"more_vert"),textClassName:"white-text",title:"Your payment data"},l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("label",null,"Payment Method: "),l.a.createElement("strong",null,l.a.createElement("span",null,this.state.rentalMethod))),l.a.createElement("p",null,l.a.createElement("label",null,"Preview Cost: "),l.a.createElement("strong",null,l.a.createElement("span",null,"".concat(this.state.previewCost,"\u20ac")))),l.a.createElement("p",null,l.a.createElement("label",null,"Time Spent: "),l.a.createElement("strong",null,l.a.createElement("span",null,this.state.timeSpent)))))))):l.a.createElement("div",null,"You still havent checked out!")),this.state.finalCost>0?l.a.createElement("div",null,this.state.hasDiscount?l.a.createElement("div",null,"Discount applied for valid Park."):l.a.createElement("div",null,"No discount"),l.a.createElement("div",null,"Payment of ".concat(this.state.finalCost,"\u20ac Successful!")),l.a.createElement("div",null,this.redirectNow())):l.a.createElement("div",null,"No payment has been made"),l.a.createElement("div",{className:"m12"},l.a.createElement(ce,{initialCenter:{lat:41.53113384600326,lng:-8.619018495082855},position:e,paths:[{lat:41.53113384600326,lng:-8.619018495082855},{lat:41.53113384600326,lng:-8.61851692199707},{lat:41.53129447698251,lng:-8.61851692199707},{lat:41.53129447698251,lng:-8.619018495082855},{lat:41.53113384600326,lng:-8.619018495082855}],style:{height:"400px",width:"100%"},center:n})))}}]),t}(n.Component),Ie=Object(k.b)((function(e){return{auth:e.auth,places:e.places,checkin:e.checkin,checkout:e.checkout,payment:e.payment,clients:e.clients}}),{logoutUser:y,postCheckIn:pe,updateCheckout:function(e,t,a,n,l){return function(r){return b.a.put("http://localhost:5002/api/v1/rental/checkout/".concat(e,"/vehicle/").concat(t,"/lat/").concat(a,"/lon/").concat(n,"/address/").concat(l)).then((function(e){return r({type:"PUT_CHECKOUT",payload:e.data})})).catch((function(e){return r({type:"CHECKOUT_ERROR",payload:e})}))}},updatePayment:function(e){return function(t){return b.a.put("http://localhost:5002/api/v1/rental/payment/".concat(e)).then((function(e){return t({type:"PUT_PAYMENT",payload:e.data})})).catch((function(e){return t({type:"PAYMENT_ERROR",payload:e})}))}}})(Ae),De=function(e,t){return function(a){return b.a.put("http://localhost:5002/api/v1/users/".concat(e,"/validation/").concat(t)).then((function(e){return a({type:"UPDATE_VALIDATE_USERS",payload:e})})).catch((function(e){return a({type:"UPDATE_ERROS",payload:e})}))}},Pe=function(){return function(e){return b.a.get("http://localhost:5002/api/v1/rental/check").then((function(t){return e({type:"GET_RENTAL_DATA",payload:t.data})})).catch((function(t){return e({type:"UPDATE_ERROS",payload:t})}))}};function Le(){return l.a.createElement("div",null,l.a.createElement("nav",{style:{fontFamily:"monospace"}},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("a",{href:"#",className:"brand-logo right"},"MERN"),l.a.createElement("ul",{id:"nav-mobile",className:"center hide-on-med-and-down"},l.a.createElement("li",null,l.a.createElement(m.b,{to:"/validateUsers"},"Validate Users")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/checkParkings"},"Check Parkings")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/marParkings"},"Visualize Parkings"))))))}var Me=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).updateUser=function(e){e.preventDefault();var t={id:a.state.item,userId:a.props.auth.user._id};a.props.updateUsers(t.id,t.userId),window.location.reload()},a.state={user:"",item:"",checkedItems:new Map},a.handleChange=a.handleChange.bind(Object(xe.a)(a)),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getValidUsers()}}]),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=e.target.id,a=e.target.checked;this.setState((function(e){return{checkedItems:e.checkedItems.set(t,a),item:t}})),console.log(this.state),console.log(t)}},{key:"render",value:function(){var e=this;console.log(this.props);this.props.auth.user,this.props.clients.places;var t=this.props.validUsers.validUsers;return console.log(t),l.a.createElement("div",null,l.a.createElement(Le,null),l.a.createElement(me.Table,{centered:"true",responsible:"true"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{"data-field":"role"},"Role"),l.a.createElement("th",{"data-field":"user"},"User"),l.a.createElement("th",{"data-field":"email"},"email"),l.a.createElement("th",{"data-field":"valid"},"Validate"))),t.map((function(t){return l.a.createElement("tbody",{key:t._id},l.a.createElement("tr",null,l.a.createElement("td",null,t.role),l.a.createElement("td",null,t.username),l.a.createElement("td",null,t.email),l.a.createElement("td",null,l.a.createElement(me.Checkbox,Object(B.a)({style:{margin:"1em"},id:t._id,label:"",value:"Red",onChange:e.handleChange,checked:e.state.checkedItems.get(t._id)},"onChange",e.handleChange)),l.a.createElement(me.Button,{node:"a",small:!0,style:{marginRight:"5px",marginBottom:"1.6em"},onClick:e.updateUser},"Validate"))))}))))}}]),t}(n.Component),Ve=Object(k.b)((function(e){return{auth:e.auth,places:e.places,clients:e.clients,validUsers:e.validUsers,updateUser:e.updateUser}}),{logoutUser:y,getValidUsers:function(){return function(e){return b.a.get("http://localhost:5002/api/v1/users/admin/waitvalidation").then((function(t){return e({type:"GET_VALIDATE_USERS",payload:t.data})})).catch((function(t){return e({type:"GET_ERRORS",payload:t})}))}},updateUsers:De})(Me,De),Fe=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getRentalData()}},{key:"render",value:function(){console.log(this.props);this.props.auth.user;var e=this.props.rental.rental;return l.a.createElement("div",null,l.a.createElement(Le,null),l.a.createElement(me.Table,{centered:"true",responsible:"true"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{"data-field":"username"},"Username"),l.a.createElement("th",{"data-field":"fullname"},"Fullname"),l.a.createElement("th",{"data-field":"email"},"Email"),l.a.createElement("th",{"data-field":"rental"},"Rental Method"),l.a.createElement("th",{"data-field":"Address"},"Address"),l.a.createElement("th",{"data-field":"timespend"},"Time Spent"),l.a.createElement("th",{"data-field":"cost"},"Cost"))),e.map((function(e){return l.a.createElement("tbody",{key:e._id},l.a.createElement("tr",null,l.a.createElement("td",null,e.username),l.a.createElement("td",null,"".concat(e.firstname," ").concat(e.lastname)),l.a.createElement("td",null,e.email),l.a.createElement("td",null,e.rentalMethod),l.a.createElement("td",null,e.address),l.a.createElement("td",null,e.timeSpent),l.a.createElement("td",null,void 0===e.finalCost?"-":"".concat(e.finalCost,"\u20ac"))))}))))}}]),t}(n.Component),Be=Object(k.b)((function(e){return{auth:e.auth,places:e.places,rental:e.rental}}),{logoutUser:y,getRentalData:Pe})(Fe),Ge=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getRentalData()}},{key:"render",value:function(){this.props.auth.user;var e=this.props.rental.rental;console.log(this.props);var t=e.map((function(e){return{lat:e.end.geometry.coordinates[0],lng:e.end.geometry.coordinates[1]}}));return console.log(t),l.a.createElement("div",null,l.a.createElement(Le,null),"oi",l.a.createElement(be,{markerPositions:t,initialCenter:{lat:41.53113384600326,lng:-8.619018495082855},style:{height:"400px",width:"100%"}}))}}]),t}(n.Component),He=Object(k.b)((function(e){return{auth:e.auth,places:e.places,rental:e.rental}}),{logoutUser:y,getRentalData:Pe})(Ge);function Ye(){return l.a.createElement("div",null,l.a.createElement("nav",{style:{fontFamily:"monospace"}},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("a",{href:"#",className:"brand-logo right"},"MERN"),l.a.createElement("ul",{id:"nav-mobile",className:"center hide-on-med-and-down"},l.a.createElement("li",null,l.a.createElement(m.b,{to:"/notifyUsers"},"Notify Users"))))))}var We=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).updateUser=function(e){e.preventDefault();var t=a.state.item;a.props.updateNotifications(t),window.location.reload()},a.state={user:"",item:"",checkedItems:new Map},a.handleChange=a.handleChange.bind(Object(xe.a)(a)),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.validUsers()}}]),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=e.target.id,a=e.target.checked;this.setState((function(e){return{checkedItems:e.checkedItems.set(t,a),item:t}})),console.log(this.state),console.log(t)}},{key:"render",value:function(){var e=this;console.log(this.props);this.props.auth.user;var t=this.props.validated.validated;return l.a.createElement("div",null,l.a.createElement(Ye,null),l.a.createElement(me.Table,{centered:"true",responsible:"true"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{"data-field":"role"},"Role"),l.a.createElement("th",{"data-field":"user"},"User"),l.a.createElement("th",{"data-field":"email"},"email"),l.a.createElement("th",{"data-field":"email"},"Parking"),l.a.createElement("th",{"data-field":"valid"},"Notified"))),t.map((function(t){return l.a.createElement("tbody",{key:t._id},l.a.createElement("tr",null,l.a.createElement("td",null,t.role),l.a.createElement("td",null,t.username),l.a.createElement("td",null,t.email),l.a.createElement("td",null,t.validParking?"Valid Parking":"Invalid Parking"),l.a.createElement("td",null,t.notified?"User Notified":l.a.createElement("div",null,l.a.createElement(me.Checkbox,{style:{margin:"1em"},id:t._id,label:"",value:"Red",checked:e.state.checkedItems.get(t._id),onChange:e.handleChange}),l.a.createElement(me.Button,{node:"a",small:!0,style:{marginRight:"5px",marginBottom:"1.6em"},onClick:e.updateUser},"Notify")))))}))))}}]),t}(n.Component),Je=Object(k.b)((function(e){return{auth:e.auth,updateUser:e.updateUser,validated:e.validated,users:e.users}}),{logoutUser:y,validUsers:function(){return function(e){return b.a.get("http://localhost:5002/api/v1/users/func/validUsers").then((function(t){return e({type:"GET_VALID_USERS",payload:t.data})})).catch((function(t){return e({type:"UPDATE_ERROS",payload:t})}))}},updateNotifications:function(e){return function(t){return b.a.put("http://localhost:5002/api/v1/notify/".concat(e)).then((function(e){return console.log("USER"+e),t({type:"NOTIFY_USER",payload:e})})).catch((function(e){return t({type:"UPDATE_ERROS",payload:e})}))}}})(We),ze=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).onLogoutClick=function(e){e.preventDefault(),a.props.logoutUser(),a.props.history.push("/login")},a.onBack=function(){a.props.history.push("/searchVehicles")},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.auth.user;return l.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 center-align"},l.a.createElement("h4",null,l.a.createElement("b",null,"Hey there,")," ",e.username,l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Are you sure you want to leave? Or go back?")),l.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:this.onLogoutClick,className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Logout"),l.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:this.onBack,className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Go Back"))))}}]),t}(n.Component),Ke=Object(k.b)((function(e){return{auth:e.auth}}),{logoutUser:y})(ze);if(localStorage.jwtToken){var qe=localStorage.jwtToken;f(qe);var Xe=E()(qe);M.dispatch(v(Xe));var Ze=Date.now()/1e3;Xe.exp<Ze&&(M.dispatch(y()),window.location.href="./places")}var Qe=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement(k.a,{store:M},l.a.createElement(m.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(V,null),l.a.createElement(d.b,{exact:!0,path:"/logout",component:Ke}),l.a.createElement(d.b,{exact:!0,path:"/",component:F}),l.a.createElement(d.b,{exact:!0,path:"/register",component:W}),l.a.createElement(d.b,{exact:!0,path:"/login",component:z}),l.a.createElement(d.b,{exact:!0,path:"/places",component:ie}),l.a.createElement(d.d,null,l.a.createElement(q,{exact:!0,path:"/charts",component:ae}),l.a.createElement(q,{exact:!0,path:"/dashboard",component:Z}),l.a.createElement(q,{exact:!0,path:"/main",component:Ee}),l.a.createElement(q,{exact:!0,path:"/profile",component:Ne}),l.a.createElement(q,{exact:!0,path:"/balance",component:Se}),l.a.createElement(q,{exact:!0,path:"/checkin",component:Ue}),l.a.createElement(q,{exact:!0,path:"/checkout",component:Ie}),l.a.createElement(q,{exact:!0,path:"/searchVehicles",component:ke}),l.a.createElement(q,{exact:!0,path:"/validateusers",component:Ve}),l.a.createElement(q,{exact:!0,path:"/checkParkings",component:Be}),l.a.createElement(q,{exact:!0,path:"/marParkings",component:He}),l.a.createElement(q,{exact:!0,path:"/notifyUsers",component:Je})))))}}]),t}(n.Component);a(290),a(291);c.a.render(l.a.createElement(Qe,null),document.querySelector("#root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.86f08aca.chunk.js.map